{"version":3,"sources":["Components/Wrapper/ChatPage/ChatPage.module.scss","Components/Wrapper/ChatPage/ChatForm/ChatForm.module.scss","Components/Wrapper/ChatPage/User/Message.module.scss","Redux/selectors/chat-selector.ts","Components/Wrapper/ChatPage/ChatForm/ChatForm.tsx","Components/Wrapper/ChatPage/User/Message.tsx","Components/Wrapper/ChatPage/ChatPage.tsx"],"names":["module","exports","selectIsChatMessages","state","chat","messages","selectWsStatus","wsStatus","FormItem","Form","Item","ChatForm","React","memo","dispatch","useDispatch","useSelector","initialValues","messageText","validate","value","onSubmit","values","actions","setTimeout","sendMessage","setSubmitting","resetForm","isSubmitting","errors","className","s","form","formItem","name","maxLengthCreator","field","showCount","placeholder","autoFocus","component","formStyle","fieldError","SendButton","type","htmlType","disabled","Message","message","user","userInfo","src","photo","userPhoto","alt","nameAndMess","data-test","userName","bottomLine","ChatPage","isAuth","selectIsAuth","useState","isChatOpen","setIsChatOpen","chatPage","hide","chatTop","icon","onClick","Chat","to","pathname","useEffect","startMessageEventListening","stopMessageEventListening","chatMessages","map","m","id"],"mappings":"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","file":"static/js/3.28171752.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"chatPage\":\"ChatPage_chatPage__2nDyn\",\"chatTop\":\"ChatPage_chatTop__wPBZn\",\"icon\":\"ChatPage_icon__2mX_9\",\"chat\":\"ChatPage_chat__3AFOR\",\"hide\":\"ChatPage_hide__18drf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"ChatForm_form__3X8R5\",\"formItem\":\"ChatForm_formItem__2qgkn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"user\":\"Message_user__3uUI-\",\"userInfo\":\"Message_userInfo__1lLP9\",\"nameAndMess\":\"Message_nameAndMess__1giLx\",\"userName\":\"Message_userName__2N0_U\",\"message\":\"Message_message__2Bi20\",\"bottomLine\":\"Message_bottomLine__1phg0\"};","import { StateType } from '../store';\r\n\r\nexport const selectIsChatMessages = (state: StateType) => {\r\n    return state.chat.messages\r\n}\r\n\r\nexport const selectWsStatus = (state: StateType) => {\r\n    return state.chat.wsStatus\r\n}\r\n\r\n","import React from \"react\"\r\nimport s from './ChatForm.module.scss';\r\nimport { Form, Button, Row, Col } from \"antd\";\r\nimport { Form as FormikForm, Field, FormikHelpers, FieldProps } from \"formik\";\r\nimport { Formik, ErrorMessage } from 'formik';\r\nimport { maxLengthCreator } from \"../../../../validators/validators\";\r\nimport TextArea from \"antd/lib/input/TextArea\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { sendMessage } from \"../../../../Redux/Chat-Reducer\";\r\nimport { selectWsStatus } from \"../../../../Redux/selectors/chat-selector\";\r\nimport formStyle from '../../../Common/formControl.module.scss';\r\n\r\nconst FormItem = Form.Item;\r\n\r\n\r\ntype ChatFormValuesType = {\r\n    messageText: string\r\n}\r\n\r\nexport const ChatForm: React.FC = React.memo(() => {\r\n\r\n    const dispatch = useDispatch();\r\n    const wsStatus = useSelector(selectWsStatus);\r\n\r\n    const submit = (values: ChatFormValuesType, actions: FormikHelpers<ChatFormValuesType>) => {\r\n        setTimeout(() => {\r\n            dispatch(sendMessage(values.messageText));\r\n            actions.setSubmitting(false);\r\n            actions.resetForm({});\r\n        }, 400);\r\n    }\r\n\r\n\r\n    return (\r\n        <Formik\r\n            initialValues={{ messageText: '' }}\r\n            validate={(value) => { }}\r\n            onSubmit={submit}\r\n        >\r\n            {({ isSubmitting, errors, values }) => (\r\n                <FormikForm className={s.form}>\r\n                            <FormItem className={s.formItem}>\r\n                                <Field name=\"messageText\"\r\n                                    validate={maxLengthCreator(30)}>\r\n                                    {({ field }: FieldProps) => <TextArea showCount {...field} placeholder=\"message body\" autoFocus={true} />}\r\n                                </Field>\r\n                                <ErrorMessage name=\"messageText\" component={() => <div className={formStyle.fieldError}>{errors.messageText}</div>} />\r\n                            </FormItem>\r\n                    <Button className={s.SendButton}  type={\"primary\"} htmlType={\"submit\"} disabled={ isSubmitting || wsStatus === 'close' || !values.messageText }>\r\n                        add\r\n                    </Button>\r\n                </FormikForm>\r\n            )}\r\n        </Formik>\r\n    )\r\n});\r\n","import React from 'react'\r\nimport { MessageType } from '../../../../Api/Chat-api';\r\nimport userPhoto from '../../../../images/img.jpg'\r\nimport s from './Message.module.scss';\r\n\r\n\r\ntype PropsType = {\r\n    message: MessageType\r\n}\r\n\r\nexport const Message: React.FC<PropsType> = React.memo(({ message }) => {\r\n\r\n\r\n    return (\r\n        <div className={s.user}>\r\n            <div className={s.userInfo}>\r\n                <div>\r\n                    <img src={message.photo || userPhoto} alt=\"uerPhoto\" />\r\n                </div>\r\n                <div className={s.nameAndMess}>\r\n                    <div data-test={'userNameTest'} className={s.userName}>\r\n                       {message.userName}\r\n                    </div>\r\n                    <div className={s.message}>\r\n                        <div> \r\n                            message: \r\n                        </div>\r\n                        <span>{message.message}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className={s.bottomLine}>\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n})\r\n","import React, { useEffect, useState } from \"react\";\r\nimport s from './ChatPage.module.scss';\r\nimport { ChatForm } from \"./ChatForm/ChatForm\";\r\nimport { Message } from \"./User/Message\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { startMessageEventListening, stopMessageEventListening } from \"../../../Redux/Chat-Reducer\";\r\nimport { selectIsChatMessages } from \"../../../Redux/selectors/chat-selector\";\r\nimport ReactScrollableFeed from 'react-scrollable-feed'\r\nimport { selectIsAuth } from \"../../../Redux/selectors/auth-selector\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { BsChatDots } from 'react-icons/bs';\r\nimport { IoIosArrowUp, IoIosArrowDown } from 'react-icons/io';\r\n\r\n\r\nconst ChatPage: React.FC = React.memo(() => {\r\n\r\n    const isAuth = useSelector(selectIsAuth)\r\n    const [isChatOpen, setIsChatOpen] = useState(true)\r\n\r\n    if (!isAuth) {\r\n        return <Redirect to={{\r\n            pathname: \"/login\"\r\n        }} />\r\n    }\r\n    return (\r\n        <div className={`${s.chatPage} ${isChatOpen ? '' : s.hide}`}>\r\n            <div className={s.chatTop}>\r\n                <div>\r\n                    <span> Chat </span>\r\n                    <BsChatDots />\r\n                </div>\r\n                <div className={s.icon} onClick={() => {\r\n                    setIsChatOpen(!isChatOpen)\r\n                }}>\r\n                    {isChatOpen ? <IoIosArrowDown /> : <IoIosArrowUp />}\r\n                </div>\r\n            </div>\r\n            <Chat />\r\n            <ChatForm />\r\n        </div>\r\n    )\r\n})\r\n\r\n\r\nexport const Chat: React.FC = React.memo(() => {\r\n\r\n    const dispatch = useDispatch()\r\n    const messages = useSelector(selectIsChatMessages)\r\n\r\n    useEffect(() => {\r\n        dispatch(startMessageEventListening())\r\n        return () => {\r\n            dispatch(stopMessageEventListening())\r\n        }\r\n    }, [dispatch])\r\n\r\n    const chatMessages = messages.map((m) => <Message key={m.id} message={m} />)\r\n\r\n    return (\r\n        <div className={s.chat} >\r\n            <ReactScrollableFeed >\r\n                {chatMessages}\r\n            </ReactScrollableFeed>\r\n        </div>\r\n    )\r\n})\r\n\r\n\r\n\r\nexport default ChatPage;\r\n"],"sourceRoot":""}