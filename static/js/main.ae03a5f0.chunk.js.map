{"version":3,"sources":["Components/Header/Header.module.scss","Components/Main/SideBar/Friends/Friend/Friend.module.scss","Components/Main/ProfilePage/UserInfor/ProfileData/UserContacts/UserContacts.module.scss","Components/Main/UserPage/UsersPage.module.scss","Components/Main/LoginPage/LoginForm/LoginForm.module.scss","hooks/useShowMore.tsx","Components/Main/ProfilePage/ProfilePage.module.scss","Components/Main/ProfilePage/UserInfor/UserPhoto/UserPhoto.module.scss","Components/Main/SideBar/Friends/Friends.module.scss","Components/Main/UserPage/FilterForm/FilterForm.module.scss","Components/Header/Pages/Page/Page.module.scss","Components/Common/Preloader/Preloader.module.scss","hooks/useShowMore.module.scss","Components/Main/ProfilePage/UserInfor/ProfileData/UserContacts/UserContact/UserContact.module.scss","Components/Main/LoginPage/LoginPage.module.scss","Api/Chat-api.ts","Redux/Chat-Reducer.ts","Components/Header/Pages/Pages.module.scss","Components/Header/UserAvatar/UserAvatar.module.scss","Components/Main/ProfilePage/UserInfor/UserInfo.module.scss","Components/Main/SideBar/SidebarUserPhoto/SidebarUserPhoto.module.scss","Components/Main/Main.module.scss","Components/Common/Peginator/Paginator.module.scss","Components/NotFound/NotFound.module.scss","Components/Footer/Footer.module.scss","Redux/selectors/auth-selector.ts","Api/Api.ts","Components/Header/Pages/Page/Page.tsx","Components/Header/Pages/Pages.tsx","Api/Auth-api.ts","Api/Profile-api.ts","Api/security-api.ts","Redux/auth-Reducer.ts","Components/Header/UserAvatar/UserAvatar.tsx","Components/Header/Header.tsx","Redux/Profile-Reducer.ts","Redux/selectors/profile-selector.ts","images/loading.gif","Components/Common/Preloader/Preloader.tsx","Components/Main/ProfilePage/UserInfor/UserPhoto/UserPhoto.tsx","Components/Main/ProfilePage/UserInfor/ProfileData/Status/StatusForm/StatusForm.tsx","Components/Main/ProfilePage/UserInfor/ProfileData/Status/Status.tsx","Components/Main/ProfilePage/UserInfor/ProfileData/UserContacts/UserContact/UserContact.tsx","Components/Main/ProfilePage/UserInfor/ProfileData/UserContacts/UserContacts.tsx","Components/Main/ProfilePage/UserInfor/ProfileData/ProfileData.tsx","Components/Main/ProfilePage/UserInfor/ProfileDataForm/ProfileDataForm.tsx","Components/Main/ProfilePage/UserInfor/UserInfo.tsx","images/mainImg.jpg","Components/Main/ProfilePage/ProfilePage.tsx","Components/Main/SideBar/SidebarUserPhoto/SidebarUserPhoto.tsx","Redux/selectors/sideBar-selector.ts","Redux/selectors/user-selector.ts","Api/User-api.ts","Redux/User-Reducer.ts","Redux/Sidebar-Reducer.ts","Components/Main/SideBar/Friends/Friend/Friend.tsx","Components/Main/SideBar/Friends/Friends.tsx","Components/Main/SideBar/SideBar.tsx","Components/Common/Peginator/Paginator.tsx","Components/Main/UserPage/FilterForm/FilterForm.tsx","Components/Main/UserPage/User/User.tsx","Components/Main/UserPage/UserPage.tsx","Components/Main/LoginPage/LoginForm/LoginForm.tsx","Components/Main/LoginPage/LoginPage.tsx","Components/NotFound/NotFound.tsx","Components/Main/Main.tsx","Redux/App-Reducer.ts","Redux/store.ts","Redux/selectors/App-selector.ts","Components/Footer/Footer.tsx","App.tsx","reportWebVitals.ts","index.tsx","Components/Common/formsControl/formsControl.module.scss","validators/validators.ts","Components/Main/ProfilePage/UserInfor/ProfileDataForm/ProfileDataForm.module.scss","Components/Main/UserPage/User/User.module.scss","Components/Main/ProfilePage/UserInfor/ProfileData/ProfileData.module.scss","Components/Main/ProfilePage/UserInfor/ProfileData/Status/Status.module.scss","images/img.jpg","Components/Main/SideBar/SideBar.module.scss"],"names":["module","exports","useShowMore","text","textSize","componentName","useState","showFullText","setShowFullText","isShowMoreText","fullText","shortText","textLength","length","isTextBig","slice","menu","className","s","Item","showMoreText","onClick","ws","subscribers","message","open","onMessageHandler","e","forEach","JSON","parse","data","onErrorHandler","console","log","onCloseHandler","setTimeout","createWebsocket","onOpenHandler","clineUp","close","removeEventListener","WebSocket","addEventListener","WebSocketApi","wsEvent","callback","filter","send","initialState","messages","wsStatus","ChatReducer","state","action","type","payload","map","m","id","uuidv4","index","arr","actions","_messageEventSubscriber","messageEventSubscriberCreator","dispatch","_openEventSubscriber","openEventSubscriberCreator","status","startMessageEventListening","a","stopMessageEventListening","sendMessage","selectUserId","auth","selectIsAuth","isAuth","selectAuthUserProfile","authUserProfile","selectCaptchaUrl","captchaUrl","selectErrorMessage","errorMessage","ResultCodeEnum","ResultCodeCaptchaEnum","Page","React","memo","Icon","path","pageName","page","activeClassName","active","to","Pages","pages","HomeOutlined","UserSwitchOutlined","instance","axios","create","baseURL","withCredentials","headers","AuthApi","authMe","get","response","login","email","password","rememberMe","captcha","post","logout","delete","ProfileApi","getUser","getStatus","updateStatus","put","updateUserPhoto","file","FormData","append","updateProfile","profile","SecurityApi","getCaptchaUrl","resultCode","success","stringify","errorText","error","getAuthUser","getState","userId","url","UserAvatar","useSelector","userName","fullName","useDispatch","danger","block","info","icon","UserOutlined","avatar","Button","overlay","Header","header","headerContent","headerContentLeft","logo","headerContentRight","isFetching","isLoading","updateProfileStatus","icons","facebook","AiFillFacebook","website","CgWebsite","vk","BiConfused","github","AiFillGithub","instagram","AiFillInstagram","twitter","AiOutlineTwitter","youtube","AiFillYoutube","mainLink","photos","selectProfile","selectStatus","selectIsFetching","selectIsLoading","selectUpdateProfileStatus","selectIcons","Preloader","styles","preloader","src","preloaderImg","UserPhoto","img","isOwner","userPhoto","alt","selectPhoto","label","htmlFor","hidden","onChange","currentTarget","files","FormItem","Form","maxLength","maxLengthCreator","StatusForm","deActivateEditMode","initialValues","statusText","validate","value","onSubmit","values","setSubmitting","errors","onBlur","name","render","field","placeholder","autoFocus","component","formStyle","fieldError","Status","editMode","setEditMode","fullStatusText","showMoreMenu","showFullStatusText","isStatusTextBig","setShowFullStatusText","shortStatusText","showMore","placement","showInfoMenu","cursor","onDoubleClick","statusTitle","UserContact","contactsTitle","contactsValue","contact","href","UserContacts","contactsElements","Object","keys","contacts","key","i","push","contactsValues","noContacts","ProfileData","activateEditMode","useParams","profileData","userNameAndStatus","editIcon","aboutMe","lookingForAJob","professionalSkills","lookingForAJobDescription","ProfileDataForm","contactsFormCreator","formError","enableReinitialize","isSubmitting","setErrors","resetForm","centered","title","visible","onCancel","footer","htmlType","constructor","authUserId","fieldName","split","join","toLocaleLowerCase","form","pre","Group","formItem","reqAndMaxLValCreator","checked","contactsHeader","UserInfo","AuthUserId","history","useHistory","useEffect","userIdFromUrl","Number","aboutUser","large","ProfilePage","profilePage","mainImg","mainPhoto","contentBottom","SidebarUserPhoto","selectFriends","sideBar","friends","selectUsers","users","selectTotalUserCount","totalUsersCount","selectPageNumber","pageNumber","selectPageSize","pageSize","selectFilter","selectFollowingInProgress","followInProgress","UserApi","getUsers","term","friend","follow","unFollow","isFollowInProgress","items","totalCount","getFriends","result","Friend","fullFriendName","showFullFriendName","isFriendNameBig","shortFriendName","friendPhoto","small","followingInProgress","friendName","imgAndName","sparePhoto","nameLink","disabled","some","selectedId","Promise","all","then","deleteFriend","Friends","friendElements","f","SidBaFriends","test","SideBar","sidebar","sidebarTop","sidebarBottom","viewP","Paginator","totalItemsCount","onPageChangeHandler","pagesCount","paginator","defaultCurrent","size","current","total","currentPageNumber","Option","Select","FilterForm","onFilterHandler","String","setFieldValue","select","SendButton","User","button","followed","followUnFollow","followedStatus","FPId","user","userInfo","rightBlock","spareUserPhoto","leftBlock","bottomLine","UsersPage","totalUserCount","urlData","queryString","location","search","actualPageNumber","actualFilter","pathname","usersElements","u","usersPage","userPageTopBlock","usersHeader","notFound","LoginForm","Password","emailValidator","captchaImg","LoginPage","loginPage","loginHeader","NotFound","ChatPage","lazy","Main","main","match","exact","fallback","isAuthorizeFinished","rootReducer","combineReducers","app","chat","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","_store","selectIsAuthorizeFinished","Footer","App","document","body","style","backgroundColor","AppContainer","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","getElementById","required","MaxLength"],"mappings":"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","file":"static/js/main.ae03a5f0.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__3oEm5\",\"headerContent\":\"Header_headerContent__3cVMj\",\"headerContentLeft\":\"Header_headerContentLeft__1kmPt\",\"logo\":\"Header_logo__1iYvb\",\"headerContentRight\":\"Header_headerContentRight__3Tyn3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"friend\":\"Friend_friend__3rcLc\",\"imgAndName\":\"Friend_imgAndName__29T5Z\",\"nameLink\":\"Friend_nameLink__a9yL5\",\"showMore\":\"Friend_showMore__1Sr6n\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"contacts\":\"UserContacts_contacts__1UZql\",\"contactsTitle\":\"UserContacts_contactsTitle__1kr9E\",\"contactsValues\":\"UserContacts_contactsValues__3wubr\",\"noContacts\":\"UserContacts_noContacts__1gMHL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"usersPage\":\"UsersPage_usersPage__1sRyt\",\"userPageTopBlock\":\"UsersPage_userPageTopBlock__3Bci2\",\"usersHeader\":\"UsersPage_usersHeader__1u2Vr\",\"notFound\":\"UsersPage_notFound__5YT83\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"LoginForm_form__2eYfX\",\"captcha\":\"LoginForm_captcha__35FDF\",\"captchaImg\":\"LoginForm_captchaImg__214o4\"};","import React, { useState } from 'react'\r\nimport { Menu } from 'antd';\r\nimport s from './useShowMore.module.scss'\r\n\r\n\r\nexport const useShowMore = (text: string, textSize: number, componentName: string) => {\r\n\r\n    const [showFullText, setShowFullText] = useState<boolean>(false)\r\n\r\n\r\n    const isShowMoreText = componentName !== 'Friend'\r\n\r\n    const fullText: string = text\r\n    let shortText = '';\r\n    const textLength = text?.length\r\n    const isTextBig = textLength && textLength > textSize\r\n\r\n    if (isTextBig) {\r\n        shortText = text.slice(0, textSize)\r\n    }\r\n\r\n\r\n    let menu = (\r\n        <Menu className={s.menu}>\r\n            <Menu.Item className={s.showMoreText} onClick={() => {\r\n                isShowMoreText && setShowFullText(true)\r\n            }}>\r\n                <span>{isShowMoreText ? 'show more' : fullText}</span>\r\n            </Menu.Item>\r\n        </Menu>\r\n    );\r\n\r\n\r\n    return {\r\n        fullText,\r\n        isTextBig,\r\n        showFullText,\r\n        setShowFullText,\r\n        menu,\r\n        shortText\r\n    }\r\n\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profilePage\":\"ProfilePage_profilePage__3cw9o\",\"mainImg\":\"ProfilePage_mainImg__3K70k\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userPhoto\":\"UserPhoto_userPhoto__LI0GT\",\"selectPhoto\":\"UserPhoto_selectPhoto__2V73w\",\"label\":\"UserPhoto_label__cM1aj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SidBaFriends\":\"Friends_SidBaFriends__2VO4V\",\"friends\":\"Friends_friends__2CVfr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"FilterForm_form__3cdQq\",\"select\":\"FilterForm_select__1g4_-\",\"SendButton\":\"FilterForm_SendButton__33gxr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"Page_page__3wQj-\",\"active\":\"Page_active__biFyX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"preloader\":\"Preloader_preloader__vZgi5\",\"profilePre\":\"Preloader_profilePre__Xazmf\",\"statusPre\":\"Preloader_statusPre__2Ed3w\",\"photosPre\":\"Preloader_photosPre__1Q_Cs\",\"usersPre\":\"Preloader_usersPre__14nWV\",\"updProfPre\":\"Preloader_updProfPre__1slyY\",\"appPre\":\"Preloader_appPre__7OWEe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menu\":\"useShowMore_menu__1Ia2o\",\"showMoreText\":\"useShowMore_showMoreText__ZZx--\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"contact\":\"UserContact_contact__3qAUb\",\"icon\":\"UserContact_icon__3LE9C\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loginHeader\":\"LoginPage_loginHeader__36LCV\"};","import { wsStatusType } from './../Redux/Chat-Reducer';\r\n\r\nlet ws: null | WebSocket = null\r\n\r\nlet subscribers = {\r\n    message: [] as MessageSubscriberType[],\r\n    open: [] as OpenSubscriberType[]\r\n}\r\n\r\n\r\nconst onMessageHandler = (e: MessageEvent) => {\r\n    subscribers.message.forEach((s) => s(JSON.parse(e.data)))\r\n}\r\n\r\nconst onErrorHandler = () => {\r\n    console.log('error')\r\n}\r\n\r\nconst onCloseHandler = () => {\r\n    setTimeout(() => {\r\n        createWebsocket()\r\n        console.log('reconnecting')\r\n        subscribers.open.forEach((s) => s('close'))\r\n    }, 3000)\r\n}\r\nconst onOpenHandler = () => {\r\n    subscribers.open.forEach((s) => s('open'))\r\n}\r\n\r\n\r\nconst clineUp = () => {\r\n    ws?.close();\r\n    ws?.removeEventListener('message', onMessageHandler);\r\n    ws?.removeEventListener('close', onCloseHandler);\r\n    ws?.removeEventListener('open', onOpenHandler);\r\n    ws?.removeEventListener('error', onErrorHandler);\r\n}\r\n\r\nconst createWebsocket = () => {\r\n    clineUp()\r\n    ws = new WebSocket('wss://social-network.samuraijs.com/handlers/ChatHandler.ashx');\r\n    ws.addEventListener('message', onMessageHandler);\r\n    ws.addEventListener('close', onCloseHandler);\r\n    ws.addEventListener('open', onOpenHandler);\r\n    ws.addEventListener('error', onErrorHandler);\r\n}\r\n\r\nexport const WebSocketApi = {\r\n    start() {\r\n        createWebsocket()\r\n    },\r\n    subscribe(wsEvent: WsEventType, callback: SubscriberType) {\r\n        subscribers = { ...subscribers, [wsEvent]: [...subscribers[wsEvent], callback] }\r\n    },\r\n    unSubscribe(wsEvent: WsEventType, callback: SubscriberType) {\r\n        //@ts-ignore\r\n        subscribers = { ...subscribers, [wsEvent]: subscribers[wsEvent].filter((s: SubscriberType) => s !== callback) }\r\n    },\r\n    send(message: string) {\r\n        ws?.send(message);\r\n    },\r\n    stop() {\r\n        clineUp()\r\n        subscribers = { ...subscribers, message: [] }\r\n        subscribers = { ...subscribers, open: [] }\r\n    }\r\n}\r\n\r\n\r\nexport type WsEventType = 'message' | 'open'\r\ntype SubscriberType = MessageSubscriberType | OpenSubscriberType\r\nexport type MessageSubscriberType = (messages: MessageType[]) => void\r\nexport type OpenSubscriberType = (wsStatus: wsStatusType) => void\r\nexport type MessageType = {\r\n    message: string,\r\n    photo: string,\r\n    userId: number,\r\n    userName: string\r\n    id: string \r\n}","import { MessageSubscriberType, OpenSubscriberType } from './../Api/Chat-api';\r\nimport { Dispatch } from 'react';\r\nimport { MessageType, WebSocketApi } from '../Api/Chat-api';\r\nimport { GetActionsType, ThunkType } from './store';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\n\r\nconst initialState = {\r\n   messages: [] as MessageType[],\r\n   wsStatus: 'open' as wsStatusType,\r\n}\r\n\r\nexport type wsStatusType = 'open' | 'close'\r\nexport type InitialStateType = typeof initialState;\r\ntype ActionsType = GetActionsType<typeof actions>\r\n\r\nexport const ChatReducer = (state = initialState, action: ActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'CR/MESSAGES_RECEIVED':  \r\n            return {\r\n                ...state,\r\n                messages: [...state.messages, ...action.payload.messages\r\n                    .map((m: MessageType) => ( {...m, id: uuidv4()} ))]\r\n                .filter((m, index, arr) => index >= arr.length - 50)\r\n            }\r\n            case 'CR/CLEAN_MESSAGES':\r\n            case 'CR/WS_STATUS_CHANGED': \r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            }    \r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\n\r\nexport const actions = {\r\n    setMessages: ( messages: MessageType[]) => ({ type: 'CR/MESSAGES_RECEIVED', payload: { messages } } as const),\r\n    wsStatusChanged: (wsStatus: wsStatusType) => ({ type: 'CR/WS_STATUS_CHANGED', payload: { wsStatus } } as const),\r\n    cleanMessages: () =>\r\n    ({ type: 'CR/CLEAN_MESSAGES', payload:{ messages: [] as MessageType[] } } as const),\r\n}\r\n\r\n\r\nlet _messageEventSubscriber: null | MessageSubscriberType = null;\r\nconst messageEventSubscriberCreator = (dispatch: Dispatch<ActionsType>) => {\r\n    if(!_messageEventSubscriber){\r\n        _messageEventSubscriber = (messages: MessageType[]) => {\r\n            dispatch(actions.setMessages( messages))\r\n        }\r\n    }\r\n    return _messageEventSubscriber\r\n}\r\n\r\nlet _openEventSubscriber: null | OpenSubscriberType = null;\r\nconst openEventSubscriberCreator = (dispatch: Dispatch<ActionsType>) => {\r\n    if(!_openEventSubscriber){\r\n        _openEventSubscriber = (status: wsStatusType) => {\r\n            dispatch(actions.wsStatusChanged(status))\r\n        }\r\n    }\r\n    return _openEventSubscriber\r\n}\r\n\r\nexport const startMessageEventListening = ():  ThunkType<ActionsType> => {\r\n    return async (dispatch) => {\r\n            WebSocketApi.start();\r\n            WebSocketApi.subscribe('message', messageEventSubscriberCreator(dispatch));\r\n            WebSocketApi.subscribe('open', openEventSubscriberCreator(dispatch))\r\n    }\r\n}\r\n\r\nexport const stopMessageEventListening = ():  ThunkType<ActionsType> => {\r\n    return async (dispatch) => {\r\n        WebSocketApi.stop();\r\n        WebSocketApi.unSubscribe('message', messageEventSubscriberCreator(dispatch));\r\n        WebSocketApi.unSubscribe('open', openEventSubscriberCreator(dispatch));\r\n        dispatch(actions.cleanMessages())\r\n    }\r\n}\r\n\r\nexport const sendMessage = (message: string): ThunkType<ActionsType> => {\r\n    return async () => {\r\n        WebSocketApi.send(message)\r\n    }\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pages\":\"Pages_pages__2_8Fx\",\"ant-menu-submenu-title\":\"Pages_ant-menu-submenu-title__2FIm8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"avatar\":\"UserAvatar_avatar__ibIyS\",\"img\":\"UserAvatar_img__1uriq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"aboutUser\":\"UserInfo_aboutUser__35ua9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userPhoto\":\"SidebarUserPhoto_userPhoto__2ClUV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"Main_main__pOQy5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"paginator\":\"Paginator_paginator__h4jVX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"notFound\":\"NotFound_notFound__f8O5n\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"footer\":\"Footer_footer__bQfBH\"};","import { StateType } from './../store';\r\n\r\nexport const selectUserId = (state: StateType) => {\r\n    return state.auth.id\r\n}\r\n\r\nexport const selectIsAuth = (state: StateType) => {\r\n    return state.auth.isAuth\r\n}\r\n\r\nexport const selectAuthUserProfile = (state: StateType) => {\r\n    return state.auth.authUserProfile\r\n}\r\n\r\n\r\nexport const selectCaptchaUrl = (state: StateType) => {\r\n    return state.auth.captchaUrl\r\n}\r\n\r\nexport const selectErrorMessage = (state: StateType) => {\r\n    return state.auth.errorMessage\r\n}\r\n","import axios from 'axios';\r\n\r\nexport const instance = axios.create({\r\n    baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n    withCredentials: true,\r\n    headers: {\r\n      \"API-KEY\": \"bb181220-b3ed-4219-9d9b-5805e04d81d5\"\r\n    }\r\n  });\r\n\r\n  export type ResponseType<D = {}, RC = ResultCodeEnum> = {\r\n    resultCode: RC\r\n    messages: string[]\r\n    data: D\r\n  }\r\n\r\n  export enum ResultCodeEnum {\r\n    success = 0,\r\n    error = 1\r\n  }\r\n\r\n  export enum ResultCodeCaptchaEnum {\r\n    captcha = 10\r\n  }","import React, { } from \"react\"\r\nimport { NavLink } from \"react-router-dom\"\r\nimport s from './Page.module.scss';\r\nimport { IconType } from \"react-icons\";\r\n\r\n\r\ntype PropsType = {\r\n    Icon: IconType\r\n    path: string\r\n    pageName: string\r\n}\r\n\r\nexport const Page: React.FC<PropsType> = React.memo(({ Icon, path, pageName }) => {\r\n\r\n    return (\r\n        <div className={s.page}>\r\n            <NavLink activeClassName={s.active} to={`/${path}`}>\r\n                <Icon />\r\n               <span>{pageName} </span>\r\n            </NavLink>\r\n        </div>\r\n    )\r\n})","import React from \"react\"\r\nimport s from './Pages.module.scss';\r\nimport {\r\n    HomeOutlined,\r\n    UserSwitchOutlined\r\n} from '@ant-design/icons';\r\nimport { Page } from \"./Page/Page\";\r\nimport { IconType } from \"react-icons/lib\";\r\n\r\n\r\nexport const Pages: React.FC = React.memo(() => {\r\n    return (\r\n        <div className={s.pages}>\r\n            <div>\r\n                <Page key={'page1'} Icon={HomeOutlined as IconType} path={'profile'} pageName={'profile'}/>\r\n            </div>\r\n            <div>\r\n                <Page key={'page2'} Icon={UserSwitchOutlined as IconType} path={'users'} pageName={'users'}/>\r\n            </div>\r\n        </div>\r\n    )\r\n})\r\n","import { instance, ResponseType, ResultCodeCaptchaEnum, ResultCodeEnum } from \"./Api\"\r\n\r\nexport type AuthMeDataType = {\r\n        id: number\r\n        email: string\r\n        login: string\r\n}\r\n\r\nexport const AuthApi = {\r\n    authMe: async () => {\r\n        const response = await instance.get<ResponseType<AuthMeDataType>>(`auth/me`)\r\n        return response.data\r\n    },\r\n    login: async (email: string, password: string, rememberMe: boolean, captcha = '') => {\r\n        const response = await instance.post<ResponseType<{}, ResultCodeEnum | ResultCodeCaptchaEnum>>(`auth/login`, {\r\n            email,\r\n            password,\r\n            rememberMe,\r\n            captcha\r\n        })\r\n        return response.data\r\n    },\r\n    logout: async () => {\r\n        const response = await instance.delete<ResponseType>(`auth/login`)\r\n        return response.data\r\n    },\r\n}","import { PhotosType } from '../types/types';\r\nimport { ProfileType } from \"../types/types\"\r\nimport { instance, ResponseType } from \"./Api\"\r\n\r\ntype PhotosResponseType = {\r\n    photos: PhotosType\r\n}\r\n\r\nexport const ProfileApi = {\r\n    getUser: async (id: number) => {\r\n        const response = await instance.get<ProfileType>(`profile/${id}`)\r\n        return response.data\r\n    },\r\n    getStatus: async (id: number) => {\r\n        const response = await instance.get<string>(`profile/status/${id}`)\r\n        return response.data\r\n    },\r\n    updateStatus: async (status: string) => {\r\n        const response = await instance.put<ResponseType>(`profile/status`, { status })\r\n        return response.data\r\n    },\r\n    updateUserPhoto: async (file: File) => {\r\n        const data = new FormData()\r\n        data.append('file', file)\r\n        const response = await instance.put<ResponseType<PhotosResponseType>>(`profile/photo`, data, {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n        })\r\n        return response.data\r\n    },\r\n    updateProfile: async (profile: ProfileType) => {\r\n            const response = await instance.put<ResponseType>(`profile`, profile)\r\n            return response.data\r\n        }\r\n}\r\n","import { instance } from \"./Api\"\r\n\r\ntype CaptchaUrlType = {\r\n    url: string\r\n} \r\n\r\nexport const SecurityApi = {\r\n    getCaptchaUrl: async () => {\r\n        const response = await instance.get<CaptchaUrlType>(`security/get-captcha-url`)\r\n        return response.data\r\n    },\r\n}","import { ResultCodeCaptchaEnum } from './../Api/Api';\r\nimport { ProfileType } from '../types/types';\r\nimport { GetActionsType, ThunkType } from './store';\r\nimport { AuthApi } from '../Api/Auth-api';\r\nimport { ResultCodeEnum } from '../Api/Api';\r\nimport { ProfileApi } from \"../Api/Profile-api\";\r\nimport { SecurityApi } from '../Api/security-api';\r\nimport { message } from 'antd';\r\n\r\n\r\n\r\nconst initialState = {\r\n    isAuth: false,\r\n    id: null as null | number,\r\n    email: null as null | string,\r\n    login: null as null | string,\r\n    authUserProfile: null as null | ProfileType,\r\n    captchaUrl: null as null | string,\r\n    errorMessage: null as null | string\r\n}\r\n\r\nexport type InitialStateType = typeof initialState;\r\ntype ActionsType = GetActionsType<typeof actions>\r\n\r\nexport const AuthReducer = (state = initialState, action: ActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'AU/AUTH_VERIFIED':\r\n        case 'AU/AUTH_USER_RECEIVED':\r\n        case 'AU/CAPTCHA_URL_IS_RECEIVED':\r\n        case 'AU/AN_ERROR_HAS_OCCURRED':\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\n\r\nexport const actions = {\r\n    authVerified: (id: number | null, email: string | null, login: string | null, isAuth: boolean) =>\r\n        ({ type: 'AU/AUTH_VERIFIED', payload: { email, login, id, isAuth } } as const),\r\n    authUserReceived: (authUserProfile: ProfileType) =>\r\n        ({ type: 'AU/AUTH_USER_RECEIVED', payload: { authUserProfile } } as const),\r\n    captchaUrlIsReceived: (captchaUrl: string | null) =>\r\n        ({ type: 'AU/CAPTCHA_URL_IS_RECEIVED', payload: { captchaUrl } } as const),\r\n    AnErrorHasOccurred: (errorMessage: string | null) =>\r\n        ({ type: 'AU/AN_ERROR_HAS_OCCURRED', payload: { errorMessage } } as const),\r\n}\r\n\r\n\r\nexport const authMe = (): ThunkType<ActionsType> => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const data = await AuthApi.authMe()\r\n            if (data.resultCode === ResultCodeEnum.success) {\r\n                const { id, login, email } = data.data\r\n                dispatch(actions.authVerified(id, login, email, true))\r\n            }\r\n        } catch (e) {\r\n            const errorMessage = JSON.stringify(e.message)\r\n            const errorText = errorMessage.slice(1, errorMessage.length - 1)\r\n            message.error(errorText)\r\n        }\r\n    }\r\n}\r\n\r\nexport const getAuthUser = (): ThunkType<ActionsType> => {\r\n    return async (dispatch, getState) => {\r\n        try {\r\n            const state = getState()\r\n            const userId = state.auth.id\r\n            if (userId) {\r\n                const data = await ProfileApi.getUser(userId)\r\n                dispatch(actions.authUserReceived(data))\r\n            }\r\n        } catch (e) {\r\n            const errorMessage = JSON.stringify(e.message)\r\n            const errorText = errorMessage.slice(1, errorMessage.length - 1)\r\n            message.error(errorText)\r\n        }\r\n    }\r\n}\r\n\r\nexport const login = (email: string, Password: string, rememberMe: boolean, captcha: string): ThunkType<ActionsType> => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const data = await AuthApi.login(email, Password, rememberMe, captcha)\r\n            if (data.resultCode === ResultCodeEnum.success) {\r\n                dispatch(authMe())\r\n                dispatch(actions.captchaUrlIsReceived(null))\r\n                dispatch(actions.AnErrorHasOccurred(null))\r\n            } else if (data.resultCode === ResultCodeCaptchaEnum.captcha) {\r\n                dispatch(actions.AnErrorHasOccurred(data.messages[0]))\r\n                dispatch(getCaptchaUrl())\r\n            } else {\r\n                dispatch(actions.AnErrorHasOccurred(data.messages[0]))\r\n            }\r\n        } catch (e) {\r\n            const errorMessage = JSON.stringify(e.message)\r\n            const errorText = errorMessage.slice(1, errorMessage.length - 1)\r\n            message.error(errorText)\r\n        }\r\n    }\r\n}\r\n\r\nexport const logout = (): ThunkType<ActionsType> => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const data = await AuthApi.logout()\r\n            if (data.resultCode === ResultCodeEnum.success) {\r\n                dispatch(actions.authVerified(null, null, null, false))\r\n            }\r\n        } catch (e) {\r\n            const errorMessage = JSON.stringify(e.message)\r\n            const errorText = errorMessage.slice(1, errorMessage.length - 1)\r\n            message.error(errorText)\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport const getCaptchaUrl = (): ThunkType<ActionsType> => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const data = await SecurityApi.getCaptchaUrl()\r\n            dispatch(actions.captchaUrlIsReceived(data.url))\r\n        } catch (e) {\r\n            const errorMessage = JSON.stringify(e.message)\r\n            const errorText = errorMessage.slice(1, errorMessage.length - 1)\r\n            message.error(errorText)\r\n        }\r\n    }\r\n}\r\n","import { Button, Dropdown, Menu, message } from 'antd';\r\nimport React from 'react';\r\nimport s from \"./UserAvatar.module.scss\";\r\nimport {\r\n    UserOutlined\r\n} from '@ant-design/icons';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { selectAuthUserProfile, selectIsAuth } from '../../../Redux/selectors/auth-selector';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { logout } from '../../../Redux/auth-Reducer';\r\n\r\n\r\nexport const UserAvatar: React.FC = React.memo(() => {\r\n\r\n    const profile = useSelector(selectAuthUserProfile)\r\n    const userName = profile?.fullName\r\n    const isAuth = useSelector(selectIsAuth)\r\n    const dispatch = useDispatch()\r\n\r\n    function handleMenuClick(e: any) {\r\n        message.info('Click on menu item.');\r\n        console.log('click', e);\r\n    }\r\n\r\n    const menu = (\r\n        <Menu>\r\n            <Menu.Item key=\"1\">\r\n                <Button danger block onClick={()=> {\r\n                    dispatch(logout())\r\n                }}>\r\n                    logout\r\n                </Button>\r\n          </Menu.Item>\r\n            <Menu.Item key=\"2\" onClick={handleMenuClick} icon={<UserOutlined />}>\r\n                2nd menu item\r\n          </Menu.Item>\r\n        </Menu>\r\n    );\r\n\r\n    return (\r\n        <div className={s.avatar}>\r\n            {isAuth ? <Dropdown.Button overlay={menu}>\r\n                <NavLink to={'/profile'}>\r\n                    <div> {userName}</div>\r\n                </NavLink>\r\n            </Dropdown.Button> \r\n            : <div>\r\n                <Button>\r\n                    <NavLink to={'./login'}>\r\n                        login\r\n                    </NavLink>\r\n                </Button>\r\n            </div>}\r\n        </div>\r\n    )\r\n})\r\n","import { BiNetworkChart } from 'react-icons/bi';\r\nimport React from 'react';\r\nimport s from \"./Header.module.scss\";\r\nimport { Pages } from './Pages/Pages';\r\nimport { UserAvatar } from './UserAvatar/UserAvatar';\r\n\r\n\r\n\r\nexport const Header: React.FC = React.memo(() => {\r\n\r\n  return (\r\n    <div className={s.header}>\r\n      <div className={s.headerContent}>\r\n        <div className={s.headerContentLeft}>\r\n          <div className={s.logo}>\r\n            <BiNetworkChart />\r\n            <span>SOCIAL NETWORK</span>\r\n          </div>\r\n        </div>\r\n        <div className={s.headerContentRight}>\r\n          <div>\r\n            <Pages />\r\n          </div>\r\n          <div>\r\n            <UserAvatar />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n})\r\n","import { IconType } from 'react-icons/lib';\r\nimport { getAuthUser } from './auth-Reducer';\r\nimport { ProfileApi } from './../Api/Profile-api';\r\nimport { GetActionsType, ThunkType } from './store';\r\nimport { PhotosType, ProfileType } from '../types/types';\r\nimport { ResultCodeEnum } from '../Api/Api';\r\nimport { message } from 'antd';\r\nimport { AiFillFacebook, AiFillGithub, AiFillInstagram, AiOutlineTwitter, AiFillYoutube } from 'react-icons/ai';\r\nimport { CgWebsite } from 'react-icons/cg';\r\nimport { BiConfused } from 'react-icons/bi';\r\n\r\n\r\n\r\nconst initialState = {\r\n    profile: null as null | ProfileType,\r\n    status: '' as string,\r\n    isFetching: false,\r\n    isLoading: false,\r\n    updateProfileStatus: null as null | UpdateProfileStatusType,\r\n    icons: {\r\n        facebook: AiFillFacebook,\r\n        website: CgWebsite,\r\n        vk: BiConfused,\r\n        github: AiFillGithub,\r\n        instagram: AiFillInstagram,\r\n        twitter: AiOutlineTwitter,\r\n        youtube: AiFillYoutube,\r\n        mainLink: BiConfused,\r\n    } as {[key: string]: IconType}\r\n}\r\n\r\ntype UpdateProfileStatusType = 'ready' | 'pending' | 'error';\r\nexport type InitialStateType = typeof initialState;\r\ntype ActionsType = GetActionsType<typeof actions>\r\n\r\nexport const ProfileReducer = (state = initialState, action: ActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'PR/STATUS_RECEIVED':\r\n        case 'PR/SET_IS_FETCHING':\r\n        case 'PR/PHOTOS_IS_LOADED':\r\n        case 'PR/SET_UPDATE_PROFILE_STATUS':\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            }\r\n        case 'PR/PHOTOS_RECEIVED':\r\n            return {\r\n                ...state,\r\n                profile: { ...state.profile, photos: action.payload.photos } as ProfileType\r\n            }\r\n        case 'PR/PROFILE_RECEIVED':\r\n            return {\r\n                ...state,\r\n                profile: action.payload\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\n\r\nexport const actions = {\r\n    usersReceived: (profile: ProfileType) => ({ type: 'PR/PROFILE_RECEIVED', payload: profile } as const),\r\n    statusReceived: (status: string) => ({ type: 'PR/STATUS_RECEIVED', payload: { status } } as const),\r\n    setIsFetching: (isFetching: boolean) => ({ type: 'PR/SET_IS_FETCHING', payload: { isFetching } } as const),\r\n    photosReceived: (photos: PhotosType) => ({ type: 'PR/PHOTOS_RECEIVED', payload: { photos } } as const),\r\n    photosILoaded: (isLoading: boolean) => ({ type: 'PR/PHOTOS_IS_LOADED', payload: { isLoading } } as const),\r\n    setUpdateProfileStatus: (updateProfileStatus: UpdateProfileStatusType) =>\r\n        ({ type: 'PR/SET_UPDATE_PROFILE_STATUS', payload: { updateProfileStatus } } as const),\r\n}\r\n\r\n\r\nexport const getUser = (id: number): ThunkType<ActionsType> => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const data = await ProfileApi.getUser(id)\r\n            dispatch(actions.usersReceived(data))\r\n        } catch (e) {\r\n            const errorMessage = JSON.stringify(e.message)\r\n            const errorText = errorMessage.slice(1, errorMessage.length - 1)\r\n            message.error(errorText)\r\n        }\r\n    }\r\n}\r\n\r\nexport const getStatus = (id: number): ThunkType<ActionsType> => {\r\n    return async (dispatch) => {\r\n        try {\r\n            dispatch(actions.setIsFetching(true))\r\n            const data = await ProfileApi.getStatus(id)\r\n            dispatch(actions.statusReceived(data))\r\n            dispatch(actions.setIsFetching(false))\r\n        } catch (e) {\r\n            const errorMessage = JSON.stringify(e.message)\r\n            const errorText = errorMessage.slice(1, errorMessage.length - 1)\r\n            message.error(errorText)\r\n        }\r\n    }\r\n}\r\n\r\nexport const updateStatus = (status: string): ThunkType<ActionsType> => {\r\n    return async (dispatch) => {\r\n        try {\r\n            dispatch(actions.setIsFetching(true))\r\n            const data = await ProfileApi.updateStatus(status)\r\n            if (data.resultCode === ResultCodeEnum.success) {\r\n                dispatch(actions.statusReceived(status))\r\n            }\r\n            dispatch(actions.setIsFetching(false))\r\n        } catch (e) {\r\n            const errorMessage = JSON.stringify(e.message)\r\n            const errorText = errorMessage.slice(1, errorMessage.length - 1)\r\n            message.error(errorText)\r\n        }\r\n    }\r\n}\r\n\r\nexport const updateUserPhoto = (file: File): ThunkType<ActionsType> => {\r\n    return async (dispatch) => {\r\n        try {\r\n            dispatch(actions.photosILoaded(true))\r\n            const data = await ProfileApi.updateUserPhoto(file)\r\n            if (data.resultCode === ResultCodeEnum.success) {\r\n                dispatch(actions.photosReceived(data.data.photos))\r\n                dispatch(getAuthUser())\r\n            }\r\n            dispatch(actions.photosILoaded(false))\r\n\r\n        } catch (e) {\r\n            const errorMessage = JSON.stringify(e.message)\r\n            const errorText = errorMessage.slice(1, errorMessage.length - 1)\r\n            message.error(errorText)\r\n        }\r\n    }\r\n}\r\n\r\nexport const updateProfile = (profile: ProfileType, setErrors: any): ThunkType<ActionsType> => {\r\n    return async (dispatch, getState) => {\r\n        try {\r\n            dispatch(actions.setUpdateProfileStatus('pending'))\r\n            const data = await ProfileApi.updateProfile(profile)\r\n            if (data.resultCode === ResultCodeEnum.success) {\r\n                dispatch(actions.setUpdateProfileStatus('ready'))\r\n                const authUserId = getState().auth.id\r\n                if (authUserId) {\r\n                    dispatch(getUser(authUserId))\r\n                }\r\n            } else {\r\n                dispatch(actions.setUpdateProfileStatus('error'))\r\n                const errorMessage = data.messages[data.messages.length - 1]\r\n                const fieldName = errorMessage.split('->')[1].split(')').join('').toLocaleLowerCase()\r\n                setErrors({ 'contacts': { [fieldName]: errorMessage } })\r\n            }\r\n        } catch (e) {\r\n            const errorMessage = JSON.stringify(e.message)\r\n            const errorText = errorMessage.slice(1, errorMessage.length - 1)\r\n            message.error(errorText)\r\n        }\r\n    }\r\n}\r\n","import { StateType } from './../store';\r\n\r\nexport const selectProfile = (state: StateType) => {\r\n    return state.profile.profile\r\n}\r\n\r\nexport const selectStatus = (state: StateType) => {\r\n    return state.profile.status\r\n}\r\n\r\nexport const selectIsFetching = (state: StateType) => {\r\n    return state.profile.isFetching\r\n}\r\n\r\nexport const selectIsLoading = (state: StateType) => {\r\n    return state.profile.isLoading\r\n}\r\n\r\nexport const selectUpdateProfileStatus = (state: StateType) => {\r\n    return state.profile.updateProfileStatus\r\n}\r\n\r\nexport const selectIcons = (state: StateType) => {\r\n    return state.profile.icons\r\n}\r\n","export default __webpack_public_path__ + \"static/media/loading.e94beeb6.gif\";","import { Image } from \"antd\";\r\nimport React from \"react\";\r\nimport preloaderImg from '../../../images/loading.gif';\r\nimport s from './Preloader.module.scss';\r\n\r\ntype PropsType = {\r\n    styles: string\r\n}\r\n\r\nexport const Preloader: React.FC<PropsType> = React.memo(({styles})=> {\r\n    return (\r\n        <div className={s.preloader + ' ' + s[styles]}>\r\n            <Image src={preloaderImg}/>\r\n        </div>\r\n    )\r\n})\r\n","import { Input } from \"antd\"\r\nimport React, { FormEvent } from \"react\"\r\nimport s from './UserPhoto.module.scss'\r\nimport userPhoto from '../../../../../images/img.jpg'\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { updateUserPhoto } from '../../../../../Redux/Profile-Reducer';\r\nimport { selectIsLoading } from \"../../../../../Redux/selectors/profile-selector\"\r\nimport { Preloader } from \"../../../../Common/Preloader/Preloader\"\r\nimport { AiOutlineSelect } from 'react-icons/ai';\r\n\r\n\r\ntype PropsType = {\r\n    img: string | null\r\n    isOwner: boolean\r\n}\r\n\r\nexport const UserPhoto: React.FC<PropsType> = React.memo(({ img, isOwner }) => {\r\n\r\n    const dispatch = useDispatch()\r\n    const isLoading = useSelector(selectIsLoading)\r\n\r\n    const onHandleSelect = (e: FormEvent<HTMLInputElement>) => {\r\n        const file = e.currentTarget.files?.length && e.currentTarget.files[0]\r\n        dispatch(updateUserPhoto(file as File))\r\n    }\r\n\r\n    return (\r\n        <div className={s.userPhoto}>\r\n            <div>\r\n                <img src={img ? img : userPhoto} alt={'userPhoto'} />\r\n            </div>\r\n            {isOwner && <div className={s.selectPhoto}>\r\n                <label className={s.label} htmlFor=\"file\">\r\n                    <AiOutlineSelect />\r\n                </label>\r\n            </div>}\r\n\r\n            <Input hidden={true} type={'file'} id={'file'} onChange={onHandleSelect} />\r\n            {isLoading && <Preloader styles={'photosPre'} />}\r\n        </div>\r\n    )\r\n})","import React from \"react\";\r\nimport {  Input, Form } from \"antd\";\r\nimport { Form as FormikForm, Field, FormikHelpers, FieldProps } from \"formik\";\r\nimport { Formik, ErrorMessage } from 'formik';\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectStatus } from \"../../../../../../../Redux/selectors/profile-selector\";\r\nimport { maxLengthCreator } from \"../../../../../../../validators/validators\";\r\nimport formStyle from '../../../../../../Common/formsControl/formsControl.module.scss';\r\n\r\n\r\nconst FormItem = Form.Item;\r\nconst maxLength = maxLengthCreator(30)\r\n\r\ntype PropsType = {\r\n    deActivateEditMode: (statusText: string)=> void\r\n}\r\ntype StatusFormValuesType = {\r\n    statusText: string\r\n}\r\n\r\nexport const StatusForm: React.FC<PropsType> = React.memo(({deActivateEditMode}) => {\r\n\r\n    const status = useSelector(selectStatus);\r\n\r\n    const submit = (values: StatusFormValuesType, actions: FormikHelpers<StatusFormValuesType>) => {\r\n        setTimeout(() => {\r\n            actions.setSubmitting(false);\r\n        }, 400);\r\n    }\r\n\r\n    return (\r\n        <Formik\r\n            initialValues={{ statusText: status } as StatusFormValuesType}\r\n            validate={(value)=>{}}\r\n            onSubmit={submit}\r\n        >\r\n            {({ values, errors}) => (\r\n                <FormikForm onBlur={()=> {\r\n                    if(!(values.statusText.length > 30)){\r\n                        deActivateEditMode(values.statusText)\r\n                    }\r\n                }} >\r\n                    <FormItem>\r\n                        <Field name=\"statusText\"\r\n                        validate={maxLength}\r\n                         render={({ field }: FieldProps) => <Input {...field}  placeholder=\"status\" autoFocus={true} />} />\r\n                        <ErrorMessage name=\"statusText\" component={() => <div className={formStyle.fieldError}> {errors.statusText} </div>} />\r\n                    </FormItem>\r\n                </FormikForm>\r\n            )}\r\n        </Formik>\r\n    )\r\n});\r\n","import React, { useState } from \"react\"\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { updateStatus } from \"../../../../../../Redux/Profile-Reducer\";\r\nimport { selectIsFetching, selectStatus } from \"../../../../../../Redux/selectors/profile-selector\";\r\nimport { Preloader } from \"../../../../../Common/Preloader/Preloader\";\r\nimport s from './Status.module.scss';\r\nimport { StatusForm } from \"./StatusForm/StatusForm\";\r\nimport { Dropdown, Menu } from 'antd';\r\nimport { useShowMore } from \"../../../../../../hooks/useShowMore\";\r\n\r\ninterface IPropsType {\r\n    isOwner: boolean\r\n}\r\n\r\nexport const Status: React.FC<IPropsType> = React.memo(({ isOwner }) => {\r\n\r\n    const isFetching = useSelector(selectIsFetching);\r\n    const status = useSelector(selectStatus);\r\n    const dispatch = useDispatch();\r\n\r\n    const [editMode, setEditMode] = useState<boolean>(false);\r\n\r\n    let {\r\n        fullText: fullStatusText,\r\n        menu: showMoreMenu,\r\n        showFullText: showFullStatusText,\r\n        isTextBig: isStatusTextBig,\r\n        setShowFullText: setShowFullStatusText,\r\n        shortText: shortStatusText\r\n    } = useShowMore(status, 20, 'Status')\r\n\r\n    const activateEditMode = () => {\r\n        setEditMode(true)\r\n    }\r\n\r\n    const deActivateEditMode = (statusText: string) => {\r\n        setEditMode(false)\r\n        dispatch(updateStatus(statusText))\r\n    }\r\n\r\n\r\n    const showMore = isStatusTextBig ?\r\n        <Dropdown overlay={showMoreMenu} placement=\"topCenter\">\r\n            <div className={s.showMore} onClick={() => {\r\n                setShowFullStatusText(true)\r\n            }}>\r\n                ...\r\n            </div>\r\n        </Dropdown>\r\n        : null\r\n\r\n    let statusText = status\r\n    if (isStatusTextBig) {\r\n        statusText = shortStatusText\r\n    } else if (!statusText) {\r\n        statusText = 'no status'\r\n    } else {\r\n        statusText = fullStatusText\r\n    }\r\n\r\n    fullStatusText = fullStatusText ? fullStatusText : 'no status'\r\n\r\n\r\n\r\n    const showInfoMenu = (\r\n        <Menu className={s.menu}>\r\n            <Menu.Item className={s.showInfoMenu}>\r\n                <div>\r\n                    doubleClick\r\n                </div>\r\n            </Menu.Item>\r\n        </Menu>\r\n    );\r\n\r\n    return (\r\n        <>\r\n            {!editMode && <div className={`${s.status} ${isOwner ? s.cursor : ''}`} onDoubleClick={() => {\r\n                if (isOwner) {\r\n                    activateEditMode()\r\n                }\r\n            }}>\r\n                {isOwner\r\n                    ? <Dropdown overlay={showInfoMenu} placement=\"topCenter\">\r\n                        <div className={s.statusTitle}>\r\n                            status:\r\n                        </div>\r\n                    </Dropdown>\r\n                    : <div className={s.statusTitle}>\r\n                        status:\r\n                    </div>}\r\n                <div className={s.statusText}>\r\n                    {showFullStatusText ? fullStatusText : statusText}\r\n                </div>\r\n                <div >\r\n                    {showFullStatusText || showMore}\r\n                </div>\r\n            </div>}\r\n            {editMode && <div>\r\n                <StatusForm deActivateEditMode={deActivateEditMode} />\r\n            </div>}\r\n            {isFetching && <div><Preloader styles={'statusPre'} /></div>}\r\n        </>\r\n    )\r\n})\r\n","import React from \"react\";\r\nimport s from \"./UserContact.module.scss\";\r\nimport { IconType } from \"react-icons/lib\";\r\n\r\ntype PropsType = {\r\n    contactsTitle: string\r\n    contactsValue: string\r\n    Icon: IconType\r\n}\r\n\r\nexport const UserContact: React.FC<PropsType> = React.memo(({ contactsTitle, contactsValue, Icon }) => {\r\n    return (\r\n        <div>\r\n            {contactsValue ?\r\n            <div className={s.contact}>\r\n                <span>{contactsTitle}:</span> \r\n                <a href={contactsValue}> <Icon className={s.icon}/></a>\r\n            </div> : null}\r\n        </div>\r\n    )\r\n});\r\n\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectIcons } from \"../../../../../../Redux/selectors/profile-selector\";\r\nimport { ContactsType, ProfileType } from \"../../../../../../types/types\";\r\nimport { UserContact } from \"./UserContact/UserContact\";\r\nimport s from \"./UserContacts.module.scss\";\r\n\r\n\r\ntype PropsType = {\r\n   profile: ProfileType\r\n}\r\n\r\nexport const UserContacts: React.FC<PropsType> = React.memo(({profile}) => {\r\n\r\n    const icons = useSelector(selectIcons) \r\n\r\n    const contactsElements = Object.keys(profile?.contacts).map((key) =>  {\r\n        return <UserContact key={key} contactsTitle={key} Icon={icons[key]} contactsValue={profile?.contacts[key as keyof ContactsType]} />\r\n    })\r\n\r\n  let arr: number[] = []\r\n  let contactsTitle = Object.values(profile?.contacts)\r\n\r\n  for(let i = 0; i < contactsTitle.length; i++) {\r\n    if(contactsTitle[i]){\r\n       arr.push(i)\r\n    }\r\n  }\r\n\r\n    return (\r\n        <div className={s.contacts}>\r\n            <div className={s.contactsTitle}>\r\n                contacts\r\n            </div>\r\n            <div className={s.contactsValues}>\r\n               {arr.length ? contactsElements : <div className={s.noContacts}>no contacts</div>}\r\n              </div>\r\n        </div>\r\n    )\r\n})","import React from \"react\"\r\nimport { useSelector } from \"react-redux\"\r\nimport { useParams } from \"react-router\"\r\nimport { selectProfile } from \"../../../../../Redux/selectors/profile-selector\"\r\nimport { ProfileType } from \"../../../../../types/types\"\r\nimport { ParamTypes } from \"../UserInfo\"\r\nimport s from './ProfileData.module.scss';\r\nimport { Status } from \"./Status/Status\"\r\nimport { UserContacts } from \"./UserContacts/UserContacts\"\r\nimport { AiOutlineEdit } from 'react-icons/ai';\r\n\r\n\r\ntype ProfileDataPropsType = {\r\n    activateEditMode: () => void\r\n}\r\n\r\nexport const ProfileData: React.FC<ProfileDataPropsType> = React.memo(({ activateEditMode }) => {\r\n\r\n    const profile = useSelector(selectProfile) as ProfileType\r\n    const { userId } = useParams<ParamTypes>()\r\n\r\n    return (\r\n        <div className={s.profileData}>\r\n            <div className={s.userNameAndStatus}>\r\n                <div className={s.userName}>\r\n                    {profile?.fullName}\r\n                    {!userId && <div className={s.editIcon} onClick={() => {\r\n                        activateEditMode()\r\n                    }}>\r\n                        <AiOutlineEdit />\r\n                    </div>}\r\n                </div>\r\n                <div>\r\n                    <Status isOwner={!userId} />\r\n                </div>\r\n                <div className={s.aboutMe}>\r\n                    <span>about me: </span>{profile?.aboutMe || '.....'}\r\n                </div>\r\n                <div className={s.lookingForAJob}>\r\n                    <span>looking for a Job: </span>{profile?.lookingForAJob ? 'yes' : 'no'}\r\n                </div>\r\n                <div className={s.professionalSkills}>\r\n                    {profile?.lookingForAJob\r\n                        ? <div><span> my professional skills: </span>{profile?.lookingForAJobDescription || '.....'}</div>\r\n                        : null}\r\n                </div>\r\n            </div>\r\n            <div className={s.contacts}>\r\n                <UserContacts profile={profile} />\r\n            </div>\r\n        </div>\r\n    )\r\n})","import React from \"react\";\r\nimport { Input, Form, Button, Row, Col } from \"antd\";\r\nimport { Form as FormikForm, Field, FormikHelpers, FieldProps } from \"formik\";\r\nimport { Formik, ErrorMessage } from 'formik';\r\nimport { maxLengthCreator, reqAndMaxLValCreator } from \"../../../../../validators/validators\";\r\nimport s from './ProfileDataForm.module.scss';\r\nimport Checkbox from \"antd/lib/checkbox/Checkbox\";\r\nimport TextArea from \"antd/lib/input/TextArea\";\r\nimport { selectProfile, selectUpdateProfileStatus } from \"../../../../../Redux/selectors/profile-selector\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { ProfileType } from \"../../../../../types/types\";\r\nimport { updateProfile } from \"../../../../../Redux/Profile-Reducer\";\r\nimport { Preloader } from \"../../../../Common/Preloader/Preloader\";\r\nimport formError from \"../../../../Common/formsControl/formsControl.module.scss\";\r\nimport { Modal } from 'antd';\r\n\r\n\r\nconst FormItem = Form.Item;\r\nconst maxLength = maxLengthCreator(30)\r\n\r\ntype PropsType = {\r\n    deActivateEditMode: () => void\r\n    editMode: boolean\r\n}\r\n\r\n\r\nexport const ProfileDataForm: React.FC<PropsType> = React.memo(({ deActivateEditMode, editMode }) => {\r\n\r\n    const profile = useSelector(selectProfile) as ProfileType\r\n    const dispatch = useDispatch()\r\n    const updateProfileStatus = useSelector(selectUpdateProfileStatus)\r\n\r\n\r\n    const submit = (values: ProfileType, actions: FormikHelpers<ProfileType>) => {\r\n        setTimeout(() => {\r\n            actions.setSubmitting(false);\r\n        }, 400);\r\n    }\r\n\r\n    const contactsFormCreator = (errors: Partial<any>) => {\r\n        return Object.keys(profile.contacts).map((key) => {\r\n            return <FormItem label={key} className={`${s[key]} ${s.contact}`} key={key}>\r\n                <Field name={`contacts.${key}`}\r\n                    validate={maxLength}\r\n                    render={({ field }: FieldProps) => <Input {...field} placeholder={key} />} />\r\n                <ErrorMessage name={`contacts.${key}`} component={() => <div className={formError.fieldError}>{errors.contacts[key]}</div>} />\r\n            </FormItem>\r\n        })\r\n    }\r\n\r\n\r\n    return (\r\n        <Formik\r\n            enableReinitialize\r\n            initialValues={{ ...profile }}\r\n            validate={(value) => { }}\r\n            onSubmit={submit}\r\n        >\r\n            {({ isSubmitting, values, errors, setErrors, resetForm, setSubmitting }) => (\r\n                <Modal centered title={'Edit your profile'} visible={editMode} onCancel={deActivateEditMode} footer={[\r\n                    <Button htmlType={\"submit\"} type={'primary'} onClick={() => {\r\n                        if (Object.keys(errors).length === 0 && errors.constructor === Object) {\r\n                            dispatch(updateProfile(values, setErrors))\r\n                            if (!(updateProfileStatus === 'error' || updateProfileStatus === 'pending')) {\r\n                                resetForm({})\r\n                                deActivateEditMode()\r\n                                setSubmitting(false)\r\n                            }\r\n                        }\r\n\r\n                    }}>\r\n                        save\r\n                    </Button>,\r\n                    <Button onClick={() => {\r\n                        deActivateEditMode()\r\n                    }}>\r\n                        cancel\r\n                    </Button>\r\n                ]}>\r\n                    <FormikForm className={s.form}>\r\n                        <div className={s.pre}>\r\n                            {updateProfileStatus === 'pending' && <div><Preloader styles={'updProfPre'} /></div>}\r\n                        </div>\r\n                        <Input.Group>\r\n                            <FormItem className={s.formItem} label={'name'}>\r\n                                <Field name=\"fullName\"\r\n                                    validate={reqAndMaxLValCreator(20)}\r\n                                    render={({ field }: FieldProps) => <Input {...field} placeholder=\"fullName\" autoFocus={true} />} />\r\n                                <ErrorMessage name=\"fullName\" component={() => <div className={formError.fieldError}>{errors.fullName}</div>} />\r\n                            </FormItem>\r\n                            <FormItem className={s.formItem} label={'about me'}>\r\n                                <Field name=\"aboutMe\"\r\n                                    validate={reqAndMaxLValCreator(50)}\r\n                                    render={({ field }: FieldProps) => <TextArea {...field} placeholder=\"aboutMe\" />} />\r\n                                <ErrorMessage name=\"aboutMe\" component={() => <div className={formError.fieldError}>{errors.aboutMe}</div>} />\r\n                            </FormItem>\r\n                            <FormItem className={s.formItem}>\r\n                                <Field name=\"lookingForAJob\"\r\n                                    render={({ field }: FieldProps) => <Checkbox {...field} checked={values.lookingForAJob}>\r\n                                        looking for a job\r\n                                    </Checkbox>} />\r\n                                <ErrorMessage name=\"lookingForAJob\" component={() => <div className={formError.fieldError}>{errors.lookingForAJob}</div>} />\r\n                            </FormItem>\r\n                            <FormItem className={s.formItem} label={'my professional skills'}>\r\n                                <Field name=\"lookingForAJobDescription\"\r\n                                    validate={reqAndMaxLValCreator(40)}\r\n                                    render={({ field }: FieldProps) => <TextArea {...field} placeholder=\"lookingForAJobDescription\" />} />\r\n                                <ErrorMessage name=\"lookingForAJobDescription\"\r\n                                    component={() => <div className={formError.fieldError}>{errors.lookingForAJobDescription}</div>} />\r\n                            </FormItem>\r\n                        </Input.Group>\r\n                        <FormItem className={s.contacts}>\r\n                            <div className={s.contactsHeader}>\r\n                                contacts\r\n                            </div>\r\n                            {contactsFormCreator(errors)}\r\n                        </FormItem>\r\n                    </FormikForm>\r\n                </Modal>\r\n            )}\r\n        </Formik>\r\n    )\r\n});\r\n\r\n\r\n","import React, { useEffect, useState } from \"react\"\r\nimport s from \"./UserInfo.module.scss\";\r\nimport { UserPhoto } from \"./UserPhoto/UserPhoto\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getStatus, getUser } from \"../../../../Redux/Profile-Reducer\";\r\nimport { selectProfile } from \"../../../../Redux/selectors/profile-selector\";\r\nimport { Preloader } from \"../../../Common/Preloader/Preloader\";\r\nimport { ProfileType } from \"../../../../types/types\";\r\nimport { selectUserId } from \"../../../../Redux/selectors/auth-selector\";\r\nimport { useParams } from \"react-router\";\r\nimport { ProfileData } from \"./ProfileData/ProfileData\";\r\nimport { ProfileDataForm } from \"./ProfileDataForm/ProfileDataForm\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { AiOutlineEdit } from 'react-icons/ai';\r\n\r\n\r\nexport type ParamTypes = {\r\n    userId: string\r\n}\r\n\r\nexport const UserInfo: React.FC = React.memo(() => {\r\n\r\n    const dispatch = useDispatch()\r\n    const profile = useSelector(selectProfile) as ProfileType\r\n    const AuthUserId = useSelector(selectUserId)\r\n    const history = useHistory()\r\n    const { userId } = useParams<ParamTypes>()\r\n\r\n    const [editMode, setEditMode] = useState<boolean>(false)\r\n\r\n    const activateEditMode = () => {\r\n        setEditMode(true)\r\n    }\r\n    const deActivateEditMode = () => {\r\n        setEditMode(false)\r\n    }\r\n\r\n    useEffect(() => {\r\n        let userIdFromUrl = Number(userId);\r\n        if (userIdFromUrl) {\r\n            dispatch(getUser(userIdFromUrl))\r\n            dispatch(getStatus(userIdFromUrl))\r\n        } else if (AuthUserId) {\r\n            dispatch(getUser(AuthUserId))\r\n            dispatch(getStatus(AuthUserId))\r\n        } else {\r\n            history.push('/login')\r\n        }\r\n    }, [dispatch, AuthUserId, userId, history])\r\n\r\n\r\n    if (!profile) {\r\n        return <Preloader styles={'profilePre'} />\r\n    }\r\n\r\n   \r\n\r\n    return (\r\n        <div className={s.aboutUser}>\r\n            <UserPhoto isOwner={!userId} img={profile.photos?.large} />\r\n            <div>\r\n            {!editMode && <ProfileData activateEditMode={activateEditMode}/>}\r\n          \r\n            </div>\r\n            {editMode &&  <ProfileDataForm deActivateEditMode={deActivateEditMode} editMode={editMode}/>}\r\n        </div>\r\n    )\r\n})\r\n\r\n","export default __webpack_public_path__ + \"static/media/mainImg.0de69ef5.jpg\";","import React from 'react';\r\nimport s from \"./ProfilePage.module.scss\";\r\nimport { UserInfo } from './UserInfor/UserInfo';\r\nimport mainPhoto from '../../../images/mainImg.jpg'\r\nimport '../../../App.css';\r\n\r\nexport const ProfilePage: React.FC = React.memo(() => {\r\n    return (\r\n        <div className={s.profilePage}>\r\n            <div className={s.mainImg}>\r\n                <img src={mainPhoto} alt={'mainImg'}/>\r\n            </div>\r\n            <div className={s.contentBottom}>\r\n                <UserInfo />\r\n            </div>\r\n        </div>\r\n    )\r\n})","import React from \"react\"\r\nimport s from './SidebarUserPhoto.module.scss'\r\nimport userPhoto from '../../../../images/img.jpg'\r\n\r\ntype PropsType = {\r\n    img: string | null | undefined\r\n}\r\n\r\nexport const SidebarUserPhoto: React.FC<PropsType> = React.memo(({img}) => {\r\n    return (\r\n        <div className={s.userPhoto}>\r\n            <img src={img ? img : userPhoto} alt={'authorized user'} />\r\n        </div>\r\n    )\r\n})","import { StateType } from '../store';\r\n\r\nexport const selectFriends = (state: StateType) => {\r\n    return state.sideBar.friends\r\n}\r\n\r\n","import { StateType } from './../store';\r\n\r\n\r\nexport const selectUsers = (state: StateType) => {\r\n    return state.users.users\r\n}\r\n\r\nexport const selectIsFetching = (state: StateType) => {\r\n    return state.users.isFetching\r\n}\r\n\r\nexport const selectTotalUserCount = (state: StateType) => {\r\n    return state.users.totalUsersCount\r\n}\r\n\r\nexport const selectPageNumber = (state: StateType) => {\r\n    return state.users.pageNumber\r\n}\r\nexport const selectPageSize = (state: StateType) => {\r\n    return state.users.pageSize\r\n}\r\n\r\nexport const selectFilter = (state: StateType) => {\r\n    return state.users.filter\r\n}\r\n\r\nexport const selectFollowingInProgress = (state: StateType) => {\r\n    return state.users.followInProgress\r\n}\r\n","import { FilterType } from './../Redux/User-Reducer';\r\nimport { UserType } from '../types/types';\r\nimport { instance, ResponseType } from \"./Api\"\r\n\r\ntype UserResponseType = {\r\n    items: UserType[]\r\n    totalCount: number\r\n    error: string\r\n}\r\n\r\nexport const UserApi = {\r\n    getUsers: async (pageNumber: number, pageSize: number,  filter: FilterType) => {\r\n        const response = await instance.get<UserResponseType>(`users?count=${pageSize}\r\n        &page=${pageNumber}&term=${filter.term}&friend=${filter.friend}`)\r\n        return response.data\r\n    },\r\n    follow: async (id: number) => {\r\n        const response = await instance.post<ResponseType>(`follow/${id}`)\r\n        return response.data\r\n    }, \r\n    unFollow: async (id: number) => {\r\n        const response = await instance.delete<ResponseType>(`follow/${id}`)\r\n        return response.data\r\n    }, \r\n}\r\n","import { UserApi } from './../Api/User-api';\r\nimport { UserType } from '../types/types';\r\nimport { GetActionsType, ThunkType } from './store';\r\nimport { ResultCodeEnum } from '../Api/Api';\r\nimport { message } from 'antd';\r\n\r\n\r\nconst initialState = {\r\n    users: [] as UserType[],\r\n    isFetching: false,\r\n    followInProgress: [] as number[],\r\n    totalUsersCount: 0,\r\n    pageNumber: 1,\r\n    pageSize: 10,\r\n    filter: {\r\n        term: '',\r\n        friend: null as null | boolean\r\n    }\r\n}\r\n\r\nexport type FilterType = typeof initialState.filter\r\nexport type InitialStateType = typeof initialState;\r\ntype ActionsType = GetActionsType<typeof actions>\r\n\r\n\r\nexport const UserReducer = (state = initialState, action: ActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'UR/USERS_RECEIVED':\r\n            return {\r\n                ...state,\r\n                users: action.payload.users\r\n            }\r\n        case 'UR/FOLLOW_IS_FINISHED':\r\n            return {\r\n                ...state,\r\n                users: [...state.users?.map((u: UserType) => {\r\n                    if (u.id === action.payload.userId) {\r\n                        return { ...u, followed: true }\r\n                    } else {\r\n                        return u\r\n                    }\r\n                })]\r\n            }\r\n        case 'UR/UNFOLLOW_IS_FINISHED':\r\n            return {\r\n                ...state,\r\n                users: [...state.users?.map((u: UserType) => {\r\n                    if (u.id === action.payload.userId) {\r\n                        return { ...u, followed: false }\r\n                    } else {\r\n                        return u\r\n                    }\r\n                })]\r\n            }\r\n        case 'UR/SET_PAGE_NUMBER':\r\n            return {\r\n                ...state,\r\n                pageNumber: action.payload.pageNumber\r\n            }\r\n        case 'UR/SET_FILTER_DATA':\r\n            return {\r\n                ...state,\r\n                filter: action.payload.filter\r\n            }\r\n        case 'UR/SET_FOLLOWING_PROGRESS':\r\n            return {\r\n                ...state,\r\n                followInProgress: action.payload.isFollowInProgress ? [...state.followInProgress, action.payload.id]\r\n                    : state.followInProgress.filter((id) => id !== action.payload.id)\r\n            }\r\n        case 'UR/SET_IS_FETCHING':\r\n        case 'UR/TOTAL_COUNT_IS_RECEIVED':\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\n\r\nexport const actions = {\r\n    usersReceived: (users: UserType[]) =>\r\n        ({ type: 'UR/USERS_RECEIVED', payload: { users } } as const),\r\n    setIsFetching: (isFetching: boolean) =>\r\n        ({ type: 'UR/SET_IS_FETCHING', payload: { isFetching } } as const),\r\n    followIsFinished: (userId: number) =>\r\n        ({ type: 'UR/FOLLOW_IS_FINISHED', payload: { userId } } as const),\r\n    unFollowIsFinished: (userId: number) =>\r\n        ({ type: 'UR/UNFOLLOW_IS_FINISHED', payload: { userId } } as const),\r\n    totalCountIsReceived: (totalUsersCount: number) =>\r\n        ({ type: 'UR/TOTAL_COUNT_IS_RECEIVED', payload: { totalUsersCount } } as const),\r\n    setPageNumber: (pageNumber: number) =>\r\n        ({ type: 'UR/SET_PAGE_NUMBER', payload: { pageNumber } } as const),\r\n    setFilterData: (filter: FilterType) =>\r\n        ({ type: 'UR/SET_FILTER_DATA', payload: { filter } } as const),\r\n    setFollowInProgress: (id: number, isFollowInProgress: boolean) =>\r\n        ({ type: 'UR/SET_FOLLOWING_PROGRESS', payload: { id, isFollowInProgress } } as const),\r\n}\r\n\r\n\r\nexport const getUsers = (pageNumber: number, pageSize: number, filter: FilterType): ThunkType<ActionsType> => {\r\n    return async (dispatch) => {\r\n        try {\r\n            dispatch(actions.setFilterData(filter))\r\n            dispatch(actions.setIsFetching(true))\r\n            dispatch(actions.setPageNumber(pageNumber))\r\n            const data = await UserApi.getUsers(pageNumber, pageSize, filter)\r\n            dispatch(actions.setIsFetching(false))\r\n            dispatch(actions.usersReceived(data.items))\r\n            dispatch(actions.totalCountIsReceived(data.totalCount))\r\n        } catch (e) {\r\n            const errorMessage = JSON.stringify(e.message)\r\n            const errorText = errorMessage.slice(1, errorMessage.length - 1)\r\n            message.error(errorText)       \r\n        }\r\n    }\r\n}\r\n\r\nexport const follow = (userId: number): ThunkType<ActionsType> => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const data = await UserApi.follow(userId)\r\n            if (data.resultCode === ResultCodeEnum.success) {\r\n                dispatch(actions.followIsFinished(userId))\r\n                dispatch(actions.setFollowInProgress(userId, false))\r\n            }\r\n        } catch (e) {\r\n            const errorMessage = JSON.stringify(e.message)\r\n            const errorText = errorMessage.slice(1, errorMessage.length - 1)\r\n            message.error(errorText)\r\n        }\r\n    }\r\n}\r\n\r\nexport const unFollow = (userId: number): ThunkType<ActionsType, Promise<any>> => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const data = await UserApi.unFollow(userId)\r\n            if (data.resultCode === ResultCodeEnum.success) {\r\n                dispatch(actions.unFollowIsFinished(userId))\r\n                dispatch(actions.setFollowInProgress(userId, false))\r\n            }\r\n            return data\r\n        } catch (e) {\r\n            const errorMessage = JSON.stringify(e.message)\r\n            const errorText = errorMessage.slice(1, errorMessage.length - 1)\r\n            message.error(errorText)\r\n        }\r\n    }\r\n}\r\n\r\n","import { UserApi } from './../Api/User-api';\r\nimport { Dispatch } from 'react';\r\nimport { GetActionsType, ThunkType } from './store';\r\nimport { UserType } from '../types/types';\r\nimport { message } from 'antd';\r\nimport { unFollow } from './User-Reducer';\r\n\r\n\r\nconst initialState = {\r\n    friends: [] as UserType[],\r\n}\r\n\r\nexport type InitialStateType = typeof initialState;\r\ntype ActionsType = GetActionsType<typeof actions>\r\n\r\nexport const SideBarReducer = (state = initialState, action: ActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'SB/FRIENDS_RECEIVED':\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\n\r\nexport const actions = {\r\n    friendsReceived: (friends: UserType[]) =>\r\n        ({ type: 'SB/FRIENDS_RECEIVED', payload: { friends } } as const),\r\n}\r\n\r\n\r\n\r\nexport const getFriends = (): ThunkType<ActionsType> => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const result = await UserApi.getUsers(20, 3, { term: '', friend: true })\r\n            dispatch(actions.friendsReceived(result.items))\r\n        } catch (e) {\r\n            const errorMessage = JSON.stringify(e.message)\r\n            const errorText = errorMessage.slice(1, errorMessage.length - 1)\r\n            message.error(errorText)\r\n        }\r\n    }\r\n}\r\n\r\nexport const deleteFriend = (id: number): ThunkType<ActionsType> => {\r\n    return async (dispatch) => {\r\n        try {\r\n            let result = dispatch(unFollow(id))\r\n            Promise.all([result]).then(() => {\r\n                dispatch(getFriends())\r\n            })\r\n        } catch (e) {\r\n            const errorMessage = JSON.stringify(e.message)\r\n            const errorText = errorMessage.slice(1, errorMessage.length - 1)\r\n            message.error(errorText)\r\n        }\r\n    }\r\n}\r\n","import React from \"react\"\r\nimport s from './Friend.module.scss'\r\nimport sparePhoto from '../../../../../images/img.jpg'\r\nimport { PhotosType } from \"../../../../../types/types\"\r\nimport { NavLink } from \"react-router-dom\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { selectFollowingInProgress } from \"../../../../../Redux/selectors/user-selector\"\r\nimport { actions } from \"../../../../../Redux/User-Reducer\"\r\nimport { deleteFriend } from \"../../../../../Redux/Sidebar-Reducer\"\r\nimport { Dropdown, Button } from 'antd';\r\nimport { useShowMore } from \"../../../../../hooks/useShowMore\"\r\n\r\n\r\ninterface IPropsType {\r\n    photos: PhotosType\r\n    id: number\r\n    name: string\r\n}\r\n\r\n\r\nexport const Friend: React.FC<IPropsType> = React.memo(({ photos, id, name }) => {\r\n\r\n\r\n    let {\r\n        fullText: fullFriendName, menu, showFullText: showFullFriendName,\r\n        isTextBig: isFriendNameBig, shortText: shortFriendName\r\n    } = useShowMore(name, 10, 'Friend')\r\n\r\n\r\n    const friendPhoto = photos.small\r\n    const followingInProgress = useSelector(selectFollowingInProgress)\r\n    const dispatch = useDispatch()\r\n\r\n\r\n    let friendName = name \r\n    if(isFriendNameBig) {\r\n        friendName = shortFriendName\r\n    } else {\r\n        friendName = fullFriendName\r\n    }\r\n\r\n    return (\r\n        <div className={s.friend}>\r\n            <div className={s.imgAndName}>\r\n                <div className={s.img}>\r\n                    <NavLink to={`/profile/${id}`}>\r\n                        <img src={friendPhoto ? friendPhoto : sparePhoto} alt={'friendPhoto'} />\r\n                    </NavLink>\r\n                </div>\r\n                <div className={s.nameLink}>\r\n                    <NavLink to={`/profile/${id}`}>\r\n                        {showFullFriendName ? fullFriendName : friendName}\r\n                        <span className={s.showMore}>{isFriendNameBig\r\n                            ? <Dropdown overlay={menu} placement=\"topCenter\">\r\n                                <span>...</span>\r\n                            </Dropdown>\r\n                            : null}</span>\r\n                    </NavLink>\r\n                </div>\r\n            </div>\r\n            <Button disabled={followingInProgress.some((selectedId) => selectedId === id)} onClick={() => {\r\n                dispatch(deleteFriend(id))\r\n                dispatch(actions.setFollowInProgress(id, true))\r\n            }}>\r\n                delete\r\n            </Button>\r\n        </div>\r\n    )\r\n})","import React from \"react\"\r\nimport { useSelector } from \"react-redux\"\r\nimport { selectFriends } from \"../../../../Redux/selectors/sideBar-selector\"\r\nimport s from './Friends.module.scss'\r\nimport {Friend} from './Friend/Friend'\r\n\r\n\r\nexport const Friends: React.FC = React.memo(() => {\r\n    \r\n    const friends = useSelector(selectFriends)\r\n\r\n    const friendElements = friends.map((f) => <Friend key={f.id} photos={f.photos} name={f.name} id={f.id}/>)\r\n\r\n    return (\r\n        <div className={s.SidBaFriends}>\r\n            <h2>\r\n                friends\r\n            </h2>\r\n            <div className={s.test}>\r\n            <div className={s.friends}>\r\n                {friendElements}\r\n            </div>\r\n            </div>\r\n        </div>\r\n    )\r\n})","\r\nimport React, { useEffect } from 'react';\r\nimport s from \"./SideBar.module.scss\";\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { SidebarUserPhoto } from './SidebarUserPhoto/SidebarUserPhoto';\r\nimport { getAuthUser } from '../../../Redux/auth-Reducer';\r\nimport { selectAuthUserProfile } from '../../../Redux/selectors/auth-selector';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { Friends } from './Friends/Friends'\r\nimport { getFriends } from '../../../Redux/Sidebar-Reducer';\r\n\r\n\r\nexport const SideBar = () => {\r\n\r\n  const dispatch = useDispatch()\r\n  const profile = useSelector(selectAuthUserProfile)\r\n\r\n  useEffect(() => {\r\n    dispatch(getAuthUser())\r\n    dispatch(getFriends())\r\n  }, [dispatch])\r\n  \r\n\r\n  return (\r\n    <div className={s.sidebar}>\r\n      <div className={s.sidebarTop}>\r\n      </div>\r\n      <div className={s.sidebarBottom}>\r\n        <div className={s.userPhoto}>\r\n          <NavLink to={'/profile'}>\r\n            <SidebarUserPhoto img={profile?.photos.large} />\r\n          </NavLink>\r\n        </div>\r\n        <div className={s.userName}>\r\n          <NavLink to={'/profile'}>\r\n            <span>{profile?.fullName}</span>\r\n          </NavLink>\r\n        </div>\r\n        <div>\r\n          <Friends/>\r\n        </div>\r\n        <div className={s.viewP}>\r\n        <NavLink to={'/profile'}>\r\n            view profile\r\n        </NavLink>\r\n        </div>\r\n      </div>\r\n      </div>\r\n  )\r\n}","import { Pagination } from \"antd\";\r\nimport React from \"react\";\r\nimport s from './Paginator.module.scss';\r\n\r\ntype PropsType = {\r\n  totalItemsCount: number\r\n  pageSize?: number\r\n  onPageChangeHandler: (pageNumber: number) => void\r\n  pageNumber: number\r\n}\r\n\r\nexport const Paginator: React.FC<PropsType> = React.memo(({\r\n  totalItemsCount,\r\n  pageSize = 10,\r\n  onPageChangeHandler,\r\n  pageNumber\r\n}) => {\r\n\r\n  const pagesCount = totalItemsCount / pageSize\r\n\r\n  const onChange = (currentPageNumber: number) => {\r\n    onPageChangeHandler(currentPageNumber)\r\n  }\r\n  return (\r\n    <div className={s.paginator}>\r\n      <Pagination defaultCurrent={pageNumber} size={'small'} current={pageNumber} total={pagesCount * 10} onChange={onChange} />\r\n    </div>\r\n  )\r\n})\r\n\r\n\r\n\r\n","import React from \"react\";\r\nimport { Input, Form, Select, Button } from \"antd\";\r\nimport { Form as FormikForm, Field, FormikHelpers, FieldProps } from \"formik\";\r\nimport { Formik, ErrorMessage } from 'formik';\r\nimport { FilterType } from \"../../../../Redux/User-Reducer\";\r\nimport s from './FilterForm.module.scss';\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectFilter } from \"../../../../Redux/selectors/user-selector\";\r\nimport { maxLengthCreator } from \"../../../../validators/validators\";\r\nimport formStyle from '../../../Common/formsControl/formsControl.module.scss';\r\n\r\n\r\nconst Option = Select.Option\r\nconst FormItem = Form.Item;\r\nconst maxLength = maxLengthCreator(30)\r\n\r\ntype PropsType = {\r\n    onFilterHandler: (filter: FilterType) => void\r\n}\r\ntype FilterFormValuesType = {\r\n    term: string\r\n    friend: string\r\n}\r\n\r\nexport const FilterForm: React.FC<PropsType> = React.memo(({onFilterHandler}) => {\r\n\r\n    const filter = useSelector(selectFilter)\r\n\r\n    const submit = (values: FilterFormValuesType, actions: FormikHelpers<FilterFormValuesType>) => {\r\n        setTimeout(() => {\r\n            const filter: FilterType = {\r\n                term: values.term,\r\n                friend: values.friend === 'null' ? null : values.friend === 'true' ? true : false\r\n            }\r\n            onFilterHandler(filter)\r\n            actions.setSubmitting(false);\r\n        }, 400);\r\n    }\r\n\r\n\r\n    return (\r\n        <Formik\r\n            enableReinitialize\r\n            initialValues={{ term: filter.term,  friend: String(filter.friend)}}\r\n            validate={(value) => { }}\r\n            onSubmit={submit} \r\n        >\r\n            {({ isSubmitting, values, setFieldValue, errors}) => (\r\n                <FormikForm className={s.form}>\r\n                    <FormItem>\r\n                        <Field name=\"term\"\r\n                            validate={maxLength}\r\n                            render={({ field }: FieldProps) => <Input {...field} placeholder=\"userName\" autoFocus={true} />} />\r\n                        <ErrorMessage name=\"term\" component={()=><div className={formStyle.fieldError}>{errors.term}</div>} />\r\n                    </FormItem>\r\n                        <FormItem>\r\n                        <Field  name={'friend'}\r\n                            placeholder={\"HELLO\"}\r\n                            render={({ field }: FieldProps) => \r\n                             <Select \r\n                                className={s.select}\r\n                                {...field}\r\n                                onChange={value => setFieldValue(\"friend\", value)}\r\n                                value={values.friend}\r\n                            >\r\n                                <Option value=\"null\">all</Option>\r\n                                <Option value=\"true\">follow</Option>\r\n                                <Option value=\"false\">unFollow</Option>\r\n                            </Select>\r\n                            } />\r\n                        </FormItem>\r\n                    <Button className={s.SendButton} type={\"primary\"} htmlType={\"submit\"} disabled={isSubmitting}>\r\n                        find\r\n                    </Button>\r\n                </FormikForm>\r\n            )}\r\n        </Formik>\r\n    )\r\n});\r\n","import { Button } from 'antd';\r\nimport React from 'react';\r\nimport { PhotosType } from '../../../../types/types';\r\nimport s from './User.module.scss';\r\nimport spareUserPhoto from '../../../../images/img.jpg'\r\nimport { NavLink } from 'react-router-dom';\r\nimport { actions, follow, unFollow } from '../../../../Redux/User-Reducer';\r\nimport { useDispatch } from 'react-redux';\r\nimport { History } from 'history';\r\n\r\ninterface PropsType {\r\n    id: number\r\n    userName: string | null\r\n    status: string | null\r\n    photos: PhotosType\r\n    followed: boolean\r\n    followingInProgress: number[]\r\n    isAuth: boolean\r\n    history: History\r\n}\r\n\r\nexport const User: React.FC<PropsType> = React.memo(({ id, userName, status, photos, followed, followingInProgress, history, isAuth }) => {\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const followUnFollow = (followedStatus: string, action: (userId: number) => void) => {\r\n        return  <div className={s.button + \" \" + s[followedStatus]}>\r\n        <Button disabled={followingInProgress.some((FPId) => FPId === id)} onClick={() => {\r\n            if (!isAuth) {\r\n                history.push('./login')\r\n                return\r\n            }\r\n            dispatch(action(id))\r\n            dispatch(actions.setFollowInProgress(id, true))\r\n        }}>\r\n            {followedStatus}\r\n        </Button>\r\n    </div>\r\n    }\r\n\r\n    let button;\r\n    if (followed) {\r\n        button = followUnFollow('unFollow', unFollow)\r\n    } else {\r\n        button = followUnFollow('follow', follow)\r\n    }\r\n\r\n    return (\r\n        <div className={s.user}>\r\n            <div className={s.userInfo}>\r\n                <div className={s.rightBlock}>\r\n                    <div className={s.img}>\r\n                        <NavLink to={`/profile/${id}`}>\r\n                            <img src={ photos.large ?  photos.large : spareUserPhoto} alt={'userPhoto'} />\r\n                        </NavLink>\r\n                    </div>\r\n                    {button}\r\n                </div>\r\n                <div className={s.leftBlock}>\r\n                    <div className={s.userName}>\r\n                        <NavLink to={`/profile/${id}`}>\r\n                            <span> {userName}</span>\r\n                        </NavLink>\r\n                    </div>\r\n                    <div className={s.status}>\r\n                        status: {status ? status : '....'}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className={s.bottomLine}></div>\r\n        </div>\r\n    )\r\n})\r\n\r\n","import React, { useEffect } from \"react\"\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router\";\r\nimport {\r\n    selectIsFetching,\r\n    selectUsers,\r\n    selectTotalUserCount,\r\n    selectPageSize,\r\n    selectPageNumber,\r\n    selectFilter,\r\n    selectFollowingInProgress\r\n} from \"../../../Redux/selectors/user-selector\";\r\nimport { FilterType, getUsers } from \"../../../Redux/User-Reducer\";\r\nimport { Paginator } from \"../../Common/Peginator/Paginator\";\r\nimport { Preloader } from \"../../Common/Preloader/Preloader\";\r\nimport { FilterForm } from \"./FilterForm/FilterForm\";\r\nimport { User } from \"./User/User\"\r\nimport s from './UsersPage.module.scss';\r\nimport queryString from 'query-string'\r\nimport { selectIsAuth } from \"../../../Redux/selectors/auth-selector\";\r\n\r\n\r\n\r\nexport const UsersPage: React.FC = React.memo(() => {\r\n\r\n    const dispatch = useDispatch()\r\n    const history = useHistory()\r\n    const isAuth = useSelector(selectIsAuth) \r\n\r\n    const users = useSelector(selectUsers)\r\n    const isFetching = useSelector(selectIsFetching)\r\n    const totalUserCount = useSelector(selectTotalUserCount)\r\n    const pageSize = useSelector(selectPageSize)\r\n    const pageNumber = useSelector(selectPageNumber)\r\n    const filter = useSelector(selectFilter)\r\n    const followingInProgress = useSelector(selectFollowingInProgress)\r\n\r\n\r\n    type UrlDataType = {\r\n        friend?: string\r\n        term?: string\r\n        page?: string | number\r\n    }\r\n\r\n    useEffect(() => {\r\n        const urlData = queryString.parse(history.location.search) as UrlDataType\r\n        let actualPageNumber = pageNumber\r\n        let actualFilter = filter\r\n\r\n        if (urlData.page) actualPageNumber = Number(urlData.page);\r\n        if (urlData.term && urlData.term !== '') actualFilter = { ...actualFilter, term: urlData.term }\r\n        if (urlData.friend) actualFilter = { ...actualFilter, friend: urlData.friend === 'true' ? true : false }\r\n\r\n        dispatch(getUsers(actualPageNumber, pageSize, actualFilter))\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n\r\n        let urlData: UrlDataType = {}\r\n\r\n        if (pageNumber !== 1) urlData.page = String(pageNumber)\r\n        if (filter.term !== '') urlData.term = filter.term\r\n        if (filter.friend !== null) urlData.friend = String(filter.friend)\r\n\r\n        history.push({\r\n            pathname: '/users',\r\n            search: queryString.stringify(urlData)\r\n        })\r\n    }, [filter, pageNumber, history])\r\n\r\n    const onPageChangeHandler = (pageNumber: number) => {\r\n        dispatch(getUsers(pageNumber, pageSize, filter))\r\n\r\n    }\r\n    const onFilterHandler = (filter: FilterType) => {\r\n        dispatch(getUsers(1, pageSize, filter))\r\n\r\n    }\r\n\r\n    const usersElements = users.map((u) => <User isAuth={isAuth} followingInProgress={followingInProgress} key={u.id} id={u.id} userName={u.name}\r\n        photos={u.photos} status={u.status} followed={u.followed} history={history} />)\r\n\r\n    return (\r\n        <div className={s.usersPage}>\r\n            <div className={s.userPageTopBlock}>\r\n                <div className={s.usersHeader}>\r\n                    Users\r\n                </div>\r\n                <div>\r\n                    {isFetching && <Preloader styles={'usersPre'} />}\r\n                </div>\r\n            </div>\r\n            <div>\r\n                <FilterForm onFilterHandler={onFilterHandler} />\r\n            </div>\r\n            <div>\r\n                <Paginator pageSize={pageSize} pageNumber={pageNumber} onPageChangeHandler={onPageChangeHandler} totalItemsCount={totalUserCount} />\r\n            </div>\r\n            {usersElements.length === 0 \r\n            ? <div className={s.notFound}>not Found</div> \r\n            : usersElements }\r\n        </div>\r\n    )\r\n})","import React from \"react\";\r\nimport { Input, Form, Button, Image } from \"antd\";\r\nimport { Form as FormikForm, Field, FormikHelpers, FieldProps } from \"formik\";\r\nimport { Formik, ErrorMessage } from 'formik';\r\nimport s from './LoginForm.module.scss';\r\nimport Checkbox from \"antd/lib/checkbox/Checkbox\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { login } from \"../../../../Redux/auth-Reducer\";\r\nimport {selectCaptchaUrl, selectErrorMessage} from '../../../../Redux/selectors/auth-selector';\r\nimport { emailValidator,  reqAndMaxLValCreator } from \"../../../../validators/validators\";\r\nimport formStyle from '../../../Common/formsControl/formsControl.module.scss';\r\n\r\nconst FormItem = Form.Item;\r\n\r\n\r\ntype LoginFormValuesType = {\r\n    email: string\r\n    password: string\r\n    rememberMe: boolean\r\n    captcha: string\r\n}\r\n\r\nexport type FormActionsType = FormikHelpers<LoginFormValuesType>\r\n\r\nexport const LoginForm: React.FC = React.memo(() => {\r\n\r\n    const dispatch = useDispatch()\r\n    const captchaUrl = useSelector(selectCaptchaUrl)\r\n    const error = useSelector(selectErrorMessage)\r\n  \r\n\r\n    const submit = (values: LoginFormValuesType, actions: FormActionsType,) => {\r\n        setTimeout(() => {\r\n            const {email, password, rememberMe, captcha} = values;\r\n            dispatch(login(email, password, rememberMe, captcha ))\r\n            actions.setSubmitting(false);\r\n        }, 400);\r\n    }\r\n\r\n\r\n    return (\r\n        <Formik\r\n            initialValues={{ email: '', password: '', rememberMe: false, captcha: '', }}\r\n            validate={(value) => {\r\n            \r\n            }}\r\n            onSubmit={submit}\r\n        >\r\n            {({ isSubmitting, values, errors}) => (\r\n                <FormikForm className={s.form}>\r\n                    <FormItem label={'email'}>\r\n                        <Field name=\"email\"\r\n                            validate={emailValidator}\r\n                            render={({ field }: FieldProps) => <Input {...field}  type=\"email\" placeholder=\"email\" />} />\r\n                        <ErrorMessage name=\"email\" component={()=><div className={formStyle.fieldError}>{errors.email}</div>} />\r\n                    </FormItem>\r\n                    <FormItem label={'password'} >\r\n                        <Field name=\"password\"\r\n                            validate={reqAndMaxLValCreator(40)}\r\n                            render={({ field }: FieldProps) => <Input.Password {...field}  type=\"password\" placeholder=\"password\"/>} />\r\n                        <ErrorMessage name=\"password\" component={()=> <div className={formStyle.fieldError}>{errors.password}</div>} />\r\n                    </FormItem>\r\n                    <FormItem>\r\n                        <Field name=\"rememberMe\"\r\n                            render={({ field }: FieldProps) =>   \r\n                            <Checkbox\r\n                            {...field}\r\n                            checked={values.rememberMe}\r\n                          >\r\n                            rememberMe\r\n                          </Checkbox>}/>\r\n                    </FormItem>\r\n                    {error && <div className={formStyle.formError}>{error}</div>}\r\n                   {captchaUrl && <div className={s.captcha}>\r\n                       <div className={s.captchaImg}> \r\n                            <Image src={captchaUrl}/>\r\n                       </div>\r\n                    <FormItem label={'captcha'}>\r\n                        <Field name=\"captcha\"\r\n                            validate={reqAndMaxLValCreator(20)}\r\n                            render={({ field }: FieldProps) => <Input {...field}  placeholder=\"captcha\" autoFocus={true}/>} />\r\n                        <ErrorMessage name=\"captcha\" component={()=> <div className={formStyle.fieldError}>{errors.captcha}</div>} />\r\n                    </FormItem>\r\n                       </div>}\r\n                    <Button className={s.SendButton} type={\"primary\"} htmlType={\"submit\"} disabled={isSubmitting}>\r\n                        login\r\n                    </Button>\r\n                </FormikForm>\r\n            )}\r\n        </Formik>\r\n    )\r\n});\r\n","import React from \"react\";\r\nimport s from './LoginPage.module.scss';\r\nimport {LoginForm} from './LoginForm/LoginForm';\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectIsAuth } from \"../../../Redux/selectors/auth-selector\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nexport const LoginPage: React.FC = React.memo(() => {\r\n\r\n  const isAuth = useSelector(selectIsAuth)\r\n\r\n  if(isAuth){\r\n      return <Redirect to={'/profile'}/>\r\n  }\r\n\r\n  return (\r\n    <div className= {s.loginPage}>\r\n      <div className={s.loginHeader}>\r\n        login\r\n      </div>\r\n      <div>\r\n        <LoginForm/>\r\n      </div>\r\n    </div>\r\n  );\r\n})\r\n","import React from 'react';\r\nimport s from \"./NotFound.module.scss\";\r\n\r\n\r\nexport const NotFound: React.FC = React.memo(() => {\r\n\r\n    return (\r\n        <div className={s.notFound}>\r\n            NOT FOUND\r\n        </div>\r\n    )\r\n})","import { ProfilePage } from \"./ProfilePage/ProfilePage\"\r\nimport { SideBar } from \"./SideBar/SideBar\"\r\nimport React, { Suspense } from 'react';\r\nimport s from \"./Main.module.scss\";\r\nimport '../../App.css';\r\nimport { Route, Redirect, Switch } from \"react-router-dom\";\r\nimport { UsersPage } from \"./UserPage/UserPage\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectIsAuth } from '../../Redux/selectors/auth-selector'\r\nimport { LoginPage } from \"./LoginPage/LoginPage\";\r\nimport { NotFound } from './../NotFound/NotFound'\r\n\r\n\r\nconst ChatPage: React.FC = React.lazy(() => import('./ChatPage/ChatPage'));\r\n\r\n\r\nexport const Main = React.memo(() => {\r\n\r\n  const isAuth = useSelector(selectIsAuth)\r\n\r\n\r\n  return (\r\n    <div className={s.main}>\r\n      {isAuth && <SideBar />}\r\n      <div className={`commonContentStyle ${!isAuth ? 'authorized' : ''}`}>\r\n        <div>\r\n          <Switch>\r\n            <Route path={'/profile/:userId?'} render={(match) => {\r\n              return <ProfilePage />\r\n            }} />\r\n            <Route path={'/users'}>\r\n              <UsersPage />\r\n            </Route>\r\n            <Route path={'/login'}>\r\n              <LoginPage />\r\n            </Route>\r\n            <Route exact path={'/'} render={() => {\r\n              return <Redirect to={\"/profile\"}\r\n              />\r\n            }} />\r\n            <Route path={'*'}>\r\n              <NotFound />\r\n            </Route>\r\n          </Switch>\r\n        </div>\r\n      </div>\r\n      <div>\r\n         {isAuth && <Suspense fallback={<div>loading...</div>}>\r\n        <   ChatPage/>\r\n        </Suspense>}\r\n      </div> \r\n    </div>\r\n  )\r\n})","import { GetActionsType, ThunkType } from './store';\r\nimport { authMe } from './auth-Reducer';\r\nimport { message } from 'antd';\r\n\r\n\r\nconst initialState = {\r\n    isAuthorizeFinished: false,\r\n}\r\n\r\nexport type InitialStateType = typeof initialState;\r\ntype ActionsType = GetActionsType<typeof actions>\r\n\r\nexport const AppReducer = (state = initialState, action: ActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'AP/AUTHORIZE_IS_FINISHED':\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\n\r\nexport const actions = {\r\n        authorizedIsFinished: (isAuthorizeFinished: boolean) =>\r\n        ({ type: 'AP/AUTHORIZE_IS_FINISHED', payload: { isAuthorizeFinished } } as const),\r\n}\r\n\r\n\r\n\r\nexport const authorize = (): ThunkType<ActionsType> => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const result = dispatch(authMe())\r\n            Promise.all([result]).then(()=> {\r\n                dispatch(actions.authorizedIsFinished(true))\r\n            })\r\n        } catch (e) {\r\n            const errorMessage = JSON.stringify(e.message)\r\n            const errorText = errorMessage.slice(1, errorMessage.length - 1)\r\n            message.error(errorText)\r\n        }\r\n    }\r\n}\r\n","import { ThunkAction } from 'redux-thunk'\r\nimport { SideBarReducer } from './Sidebar-Reducer';\r\nimport { UserReducer } from './User-Reducer';\r\nimport { Action, applyMiddleware, combineReducers, compose, createStore } from \"redux\";\r\nimport { ProfileReducer } from \"./Profile-Reducer\";\r\nimport thunk from 'redux-thunk';\r\nimport { AuthReducer } from \"./auth-Reducer\";\r\nimport { AppReducer } from './App-Reducer';\r\nimport { ChatReducer } from './Chat-Reducer';\r\n\r\nconst rootReducer = combineReducers({\r\n    profile: ProfileReducer,\r\n    auth: AuthReducer,\r\n    users: UserReducer,\r\n    app: AppReducer,\r\n    chat: ChatReducer,\r\n    sideBar: SideBarReducer\r\n})\r\n\r\n\r\ntype TypeWithInfer<T> = T extends {[key: string]: infer U} ? U : any\r\nexport type GetActionsType<T extends {[key: string]: (...args: any) => any}> = ReturnType<TypeWithInfer<T>>   \r\nexport type StateType = ReturnType<typeof rootReducer>\r\nexport type ThunkType<A extends Action, R = Promise<void>> = ThunkAction<R, StateType, unknown, A>\r\n\r\n\r\n// @ts-ignore\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)))\r\n\r\n\r\n//@ts-ignore\r\nwindow._store = store\r\nexport default store","import { StateType } from '../store';\r\n\r\nexport const selectIsAuthorizeFinished = (state: StateType) => {\r\n    return state.app.isAuthorizeFinished\r\n}\r\n\r\n","import React from \"react\";\r\nimport s from './Footer.module.scss';\r\n\r\nexport const Footer: React.FC = React.memo(() => {\r\n    return (\r\n        <div className={s.footer}>\r\n            this site was created by David Gasparian\r\n        </div>\r\n    )\r\n})","import { useEffect } from 'react';\nimport './App.css';\nimport 'antd/dist/antd.css';\nimport { HashRouter } from 'react-router-dom';\nimport { Header } from './Components/Header/Header';\nimport { Main } from './Components/Main/Main';\nimport { Provider, useDispatch, useSelector } from 'react-redux';\nimport store from './Redux/store';\nimport { Preloader } from './Components/Common/Preloader/Preloader';\nimport { authorize } from './Redux/App-Reducer';\nimport { selectIsAuthorizeFinished } from './Redux/selectors/App-selector';\nimport { Footer } from './Components/Footer/Footer';\ndocument.body.style.backgroundColor = \"#F3F2EF\";\n\n\nfunction App() {\n\n  const dispatch = useDispatch()\n  const isAuthorizeFinished = useSelector(selectIsAuthorizeFinished)\n\n  useEffect(() => {\n    dispatch(authorize())\n  }, [dispatch])\n\n  if(!isAuthorizeFinished) {\n    return <Preloader styles={'appPre'} />\n  }\n\n  return (\n    <div className= {'App'}>\n      <Header />\n      <Main />\n      <Footer/>\n    </div>\n  );\n}\n\n\nconst AppContainer = () => {\n  return (\n    <HashRouter>\n      <Provider store={store}>\n        <App />\n      </Provider>\n    </HashRouter>\n  )\n}\n\nexport default AppContainer;","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fieldError\":\"formsControl_fieldError__2W8lW\",\"formError\":\"formsControl_formError__1ienr\"};","export const emailValidator = (value: string) => {\r\n    let error;\r\n    const maxLength = maxLengthCreator(40)\r\n    error = maxLength(value)\r\n    error = error || required(value) \r\n     if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(value)) {\r\n        error = error || 'Invalid email address';\r\n    } \r\n    return error;\r\n}\r\n\r\nexport const reqAndMaxLValCreator = (MaxLength: number) => {\r\n    return (value: string) => {\r\n        let error;\r\n        const maxLength = maxLengthCreator(MaxLength)\r\n        error = maxLength(value)\r\n        error = error || required(value) \r\n        return error\r\n    }\r\n}\r\n\r\nexport const required = (value: string) => {\r\n    let error;\r\n    if(!value) {\r\n        error = 'filed is required'\r\n    }\r\n    return error;\r\n}\r\n\r\nexport const maxLengthCreator = (maxLength: number) => (value: string) => {\r\n    let error;\r\n    if (value && value.length > maxLength) {\r\n        error = `Max length is ${maxLength}`\r\n    }\r\n    return error;\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"ProfileDataForm_form__1FYMM\",\"pre\":\"ProfileDataForm_pre__2O8rg\",\"formItem\":\"ProfileDataForm_formItem__23klk\",\"contacts\":\"ProfileDataForm_contacts__1uNUy\",\"contactsHeader\":\"ProfileDataForm_contactsHeader__37Njc\",\"contact\":\"ProfileDataForm_contact__2AOVd\",\"SendButton\":\"ProfileDataForm_SendButton__2uSCV\",\"closeIcon\":\"ProfileDataForm_closeIcon__19z6Z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"user\":\"User_user__1m8QG\",\"userInfo\":\"User_userInfo__psQg3\",\"rightBlock\":\"User_rightBlock__iRdgz\",\"button\":\"User_button__1hc_-\",\"leftBlock\":\"User_leftBlock__3WWr7\",\"status\":\"User_status__2w2lD\",\"userName\":\"User_userName__3dUmi\",\"bottomLine\":\"User_bottomLine__3sa7o\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profileData\":\"ProfileData_profileData__3wzJC\",\"userNameAndStatus\":\"ProfileData_userNameAndStatus__1_-SB\",\"userName\":\"ProfileData_userName__2tGwV\",\"editIcon\":\"ProfileData_editIcon__14FgP\",\"aboutMe\":\"ProfileData_aboutMe__2PHeA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"status\":\"Status_status__KLu2k\",\"cursor\":\"Status_cursor__fCL1U\",\"statusTitle\":\"Status_statusTitle__3rOuF\",\"statusText\":\"Status_statusText__3sk-5\",\"showMore\":\"Status_showMore__O3g_3\",\"menu\":\"Status_menu__3HvJw\",\"showInfoMenu\":\"Status_showInfoMenu__9qS5j\"};","export default __webpack_public_path__ + \"static/media/img.4e5df239.jpg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebar\":\"SideBar_sidebar__3dulD\",\"sidebarBottom\":\"SideBar_sidebarBottom__vxHE7\",\"userPhoto\":\"SideBar_userPhoto__tSYGM\",\"userName\":\"SideBar_userName__pnHuT\",\"viewP\":\"SideBar_viewP__3zbLI\",\"sidebarTop\":\"SideBar_sidebarTop__LRdFP\"};"],"sourceRoot":""}